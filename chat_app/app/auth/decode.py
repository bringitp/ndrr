import jwt


import jwt

import requests

# 与えられたJWTトークン
#jwt_token = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhemxKdHZFUUFQR09FTVlnWDhUd1FTYWt3ZHZveUIzZVRSTGRTMUd0dWFvIn0.eyJleHAiOjE2OTI1NTc2MDEsImlhdCI6MTY5MjU1NzMwMSwianRpIjoiMmE2N2ZhOGYtODI1OC00OThjLTliMTQtZGIzNzY0YjA2NDA2IiwiaXNzIjoiaHR0cHM6Ly9yb24tdGhlLXJvY2tlci5uZXQvYXV0aC9yZWFsbXMvbmRyciIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiIyYWNhOTU2YS1jNGYwLTRhZjctYjc4Zi1hYjMzZTdhNmVhMTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJweXRob24tY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6IjZjZTMxMzI5LWVjNzktNGZhNS04ZGUzLWY2NDI1NTZhNGIxZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiZGVmYXVsdC1yb2xlcy1uZHJyIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJzaWQiOiI2Y2UzMTMyOS1lYzc5LTRmYTUtOGRlMy1mNjQyNTU2YTRiMWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJiaXNjb3RhIGJpc2NvdGEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ0ZXN0MCIsImdpdmVuX25hbWUiOiJiaXNjb3RhIiwiZmFtaWx5X25hbWUiOiJiaXNjb3RhIiwiZW1haWwiOiJzbmlkZWwuYmlzY290YUBnbWFpbC5jb20ifQ.M7tjh0KdIxnyJ0ynO-8Oqadnx2B-1SZqQ4uMB1JdBcaIa3lpbcGeaodEvKha6uTSjhMTGA6S8KNybmYOjeiLSM3dzeK4VrvBz-KbihOVgXlmL-nupZkXHFmbiewM1kSzoOGvRWl6LGhs3dL7Fx7BzpuERLXT2W1E-qoHuRP3Kx80MKgywGJW8UeKEocCwqAU_yWIAj89vx-mE26SHKrwlwOoNoJiouJeM4OCsrmR3rA8bptW0kgIXVXvtk4tE0Rw0UbsXVl_UVMxXGUDRWGNyoqHZxAVrkHLIKD5v1eLOogM7pebHG7AVXEYxe3BasIpsQ61eypH1EPVfCSbWjQw0Q"
jwt_token = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhemxKdHZFUUFQR09FTVlnWDhUd1FTYWt3ZHZveUIzZVRSTGRTMUd0dWFvIn0.eyJleHAiOjE2OTI1NTgxNjcsImlhdCI6MTY5MjU1Nzg2NywianRpIjoiNjFkNmIyMDAtNTdhNy00MDdlLWIxMDctMDU5ODMzZmI1OTE2IiwiaXNzIjoiaHR0cHM6Ly9yb24tdGhlLXJvY2tlci5uZXQvYXV0aC9yZWFsbXMvbmRyciIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiIyYWNhOTU2YS1jNGYwLTRhZjctYjc4Zi1hYjMzZTdhNmVhMTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJweXRob24tY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6IjdhNTM3ZTlmLTk1YzEtNDdlZC1hYjM1LTQxZjNiOTg1ZTkyNSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiZGVmYXVsdC1yb2xlcy1uZHJyIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJzaWQiOiI3YTUzN2U5Zi05NWMxLTQ3ZWQtYWIzNS00MWYzYjk4NWU5MjUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJiaXNjb3RhIGJpc2NvdGEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ0ZXN0MCIsImdpdmVuX25hbWUiOiJiaXNjb3RhIiwiZmFtaWx5X25hbWUiOiJiaXNjb3RhIiwiZW1haWwiOiJzbmlkZWwuYmlzY290YUBnbWFpbC5jb20ifQ.ShSHNzHfMNj2-9KgMX65m0W94TdLTN4BuID8saeD3uQp5vTs4t2ea6yxIfk1RAnt5DM2KMtFWp8Wq3ceg4suuiv7fqZGbt02CkM8Z-Kjt-K4mXVl2Hcz6lt0dNMiqn2gDT40Kstm-OSKlG5SpCQMCpirFemBSEc5e40gJj5_NeRBJxJ-WsY8bPBqieA3ENbO6yotA_ttRLDPW1ntDhMiJ04nrh1nnV4YuBimM9g5oT2IeRU_VMf5vqeAcuNvOVDvbnPU_YfMeu8ec58TG2LkdHDD68zPrhmKJCjg2hxyTC-6jMTmt6Il_KiarFnLnziGKQCVVC6tG948x1YwraejHg"
  # ここにJWTトークンを入力してください

# KeycloakのURLとRealm名を設定
keycloak_url = "https://ron-the-rocker.net/auth"
realm = "ndrr"  # ご自身のRealm名に置き換えてください

# Keycloakの公開鍵を取得
jwks_url = f"{keycloak_url}/realms/{realm}/protocol/openid-connect/certs"
print (jwks_url)
response = requests.get(jwks_url)
jwks_data = response.json()
public_key = jwt.algorithms.RSAAlgorithm.from_jwk(jwks_data['keys'][0])

# JWTトークンのデコード
decoded_token = jwt.decode(jwt_token, public_key, algorithms=["RS256"])
print(decoded_token)