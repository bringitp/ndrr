"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4484],{28512:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(39324),a=n(22830),o=n(4337),i=n(35250),s=n(70079),l=n(1454),u=n(94968),d=n(32004),c=n(21389),f=n(19012),p=n(88327);function g(){var e=(0,o._)(["flex ml-auto gap-2"]);return g=function(){return e},e}var m=(0,u.vU)({copied:{id:"CopyButton.copied",defaultMessage:"Copied!",description:"Text displayed when the content has been copied"}});function h(e){var t=e.buttonText,n=e.onCopy,o=e.className,u=(0,a._)((0,s.useState)(!1),2),c=u[0],g=u[1],h=(0,f.Z)(),x=(0,s.useCallback)(function(e){e.stopPropagation(),n(),g(!0),setTimeout(function(){h()&&g(!1)},2e3)},[h,n]);return(0,i.jsxs)(i.Fragment,{children:[!c&&(0,i.jsxs)(v,{onClick:x,className:o,children:[(0,i.jsx)(p.ZP,{icon:l.j4u}),t]}),c&&(0,i.jsxs)(v,{className:o,children:[(0,i.jsx)(p.ZP,{icon:l.UgA}),t&&(0,i.jsx)(d.Z,(0,r._)({},m.copied))]})]})}var v=c.Z.button(g())},78018:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(22830),a=n(35250),o=n(39217),i=n(19841),s=n(70079),l=n(1454),u=n(70671),d=n(94968),c=n(45635),f=n(88327);function p(e){var t=e.percentage,n=e.className,r=2*Math.PI*45;return(0,a.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 120 120",className:n,children:[(0,a.jsx)("circle",{className:"origin-[50%_50%] -rotate-90 stroke-gray-200 transition-[stroke-dashoffset] duration-1000 ease-in-out",strokeWidth:"20",fill:"transparent",r:45,cx:"60",cy:"60"}),(0,a.jsx)("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:"20",strokeDashoffset:r-t/100*r,strokeDasharray:"".concat(r," ").concat(r),fill:"transparent",r:45,cx:"60",cy:"60"})]})}function g(e){return e instanceof File}function m(e){var t,n,d,m,v=e.onRemoveFileClick,x=e.file,b=e.loadingPercentage,y=e.onDownloadClick,C=(0,u.Z)(),_=null!=y,w=g(x)?x.name:x,T=!!g(x)&&x.type.startsWith("image/"),j=(t=g(x)?x:null,d=(n=(0,r._)((0,s.useState)(void 0),2))[0],m=n[1],(0,s.useEffect)(function(){if(t&&t.type.startsWith("image/")){var e=new FileReader;e.addEventListener("load",function(){var t=e.result;m("string"==typeof t?t:void 0)}),e.readAsDataURL(t)}else m(void 0)},[t]),d);return(0,a.jsxs)("div",{className:"group relative inline-block text-xs text-gray-900",children:[(0,a.jsx)(_?"button":"span",{className:"flex items-stretch justify-center",onClick:function(){return _&&(null==y?void 0:y())},children:T&&null!=j?(0,a.jsx)("span",{className:(0,i.default)("box-border h-10 w-10 rounded-md border border-black/5 bg-cover bg-center dark:border-white/20",_&&"group-hover:bg-black"),style:{backgroundImage:void 0!==j?"url(".concat(j,")"):"none"},children:_&&(0,a.jsx)(f.ZP,{icon:l._hL,className:(0,i.default)("h-5 w-5","hidden group-hover:block")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:(0,i.default)("rounded-l-md bg-gray-500 px-2 py-2 text-white transition-colors dark:bg-gray-500",_&&"group-hover:bg-black"),children:[(0,a.jsx)(f.ZP,{icon:o.Z,className:(0,i.default)("h-5 w-5",_&&"group-hover:hidden")}),_&&(0,a.jsx)(f.ZP,{icon:l._hL,className:(0,i.default)("h-5 w-5","hidden group-hover:block")})]}),(0,a.jsx)("span",{className:"flex max-w-xs items-center truncate rounded-r-md bg-gray-50 px-3 py-2 font-medium",children:(0,a.jsx)("span",{className:"truncate",children:w})})]})}),void 0!==b&&b<100&&(0,a.jsx)("div",{className:"absolute right-1 top-1 -translate-y-1/2 translate-x-1/2 rounded-full border border-white bg-white p-0.5 text-blue-700 dark:border-gray-700",children:(0,a.jsx)(p,{percentage:b,className:"h-4 w-4"})}),null!=v&&(0,a.jsx)("button",{onClick:v,className:"absolute right-1 top-1 -translate-y-1/2 translate-x-1/2 rounded-full border border-white bg-gray-500 p-0.5 text-white transition-colors hover:bg-black hover:opacity-100 group-hover:opacity-100 md:opacity-0",children:(0,a.jsx)(c.u,{label:C.formatMessage(h.removeFile),side:"top",sideOffset:4,children:(0,a.jsx)(f.ZP,{icon:l.q5L})})})]})}var h=(0,d.vU)({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file",description:"Tooltip label for removing a file from the textarea"}})},51973:function(e,t,n){var r=n(39324),a=n(22830),o=n(4337),i=n(35250),s=n(19841),l=n(70079),u=n(21389),d=n(88327);function c(){var e=(0,o._)(["absolute right-0 top-1/2 -translate-y-1/2"]);return c=function(){return e},e}t.Z=l.forwardRef(function(e,t){var n=e.name,o=e.placeholder,u=e.type,c=e.displayName,p=e.onChange,g=e.onBlur,m=e.value,h=e.saveOnBlur,v=e.icon,x=e.onInputIconClick,b=e.className,y=e.autoComplete,C=e.autoFocus,_=e.onPressEnter,w=(0,a._)((0,l.useState)(m),2),T=w[0],j=w[1],k=(0,l.useCallback)(function(e){null==g||g(e),h&&j(e.target.value)},[g,h]),M=(0,l.useCallback)(function(e){null==p||p(e),h&&j(e.target.value)},[p,h]),I=(0,l.useCallback)(function(e){"Enter"===e.key&&_&&(e.preventDefault(),_())},[_]);(0,l.useEffect)(function(){j(m)},[m]);var P=(0,r._)({},h?{}:{value:m},h?{value:T}:{});return(0,i.jsxs)("div",{className:(0,s.default)("rounded-md border border-gray-300 px-3 py-2 shadow-sm focus-within:border-indigo-600 focus-within:ring-1 focus-within:ring-indigo-600 dark:bg-gray-700",b),children:[(0,i.jsx)("label",{htmlFor:n,className:"block text-xs font-medium text-gray-900 dark:text-gray-100",children:c}),(0,i.jsxs)("div",{className:(0,s.default)(c&&"mt-1","relative"),children:[(0,i.jsx)("input",(0,r._)({ref:t,type:u,name:n,id:n,className:(0,s.default)("block w-full border-0 p-0 text-gray-900 placeholder-gray-500 outline-none focus:ring-0 dark:bg-gray-700 dark:text-gray-100 sm:text-sm",v&&"pr-6"),placeholder:o,onBlur:k,onChange:M,onKeyDown:I,autoComplete:y,autoFocus:C},P)),v&&(0,i.jsx)(f,{onClick:x,children:(0,i.jsx)(d.ZP,{icon:v})})]})]})});var f=u.Z.button(c())},40058:function(e,t,n){n.d(t,{WT:function(){return b},YE:function(){return x},ZP:function(){return y}});var r=n(81949),a=n(35250),o=n(77311),i=n(70079),s=n(70671),l=n(94968),u=n(50795),d=n(82081),c=n(88327),f=n(35588),p=n(15610),g=n(98076),m=n(44510),h=n(65642),v=n(16592),x="gpt-4-upsell",b="gpt_4";function y(e){var t=e.onModelChange,n=e.shouldShowPlusUpsell,l=e.currentModel,y=(0,s.Z)(),_=(0,g.BT)(),w=(0,v.ZP)(),T=(0,m.xT)(),j=(0,f.t)(function(e){return{setShowAccountPaymentModal:e.setShowAccountPaymentModal,showAccountPaymentModal:e.showAccountPaymentModal}}).setShowAccountPaymentModal,k=(0,i.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upgrade-hover-button";u.o.logEvent(d.a.openModalAccountPaymentfromModelPicker,{content:e}),j(!0)},[j]),M=(0,h.Z)(),I=(0,i.useMemo)(function(){return{categoryId:"gpt_4",value:x,name:y.formatMessage(C.gpt4Name),description:y.formatMessage(C.gpt4Description),disclaimer:y.formatMessage(C.gpt4Disclaimer,{textareaDisclaimer:M.textareaDisclaimer}),buttonActiveClass:"text-brand-purple",buttonHoverClass:"group-hover/button:text-brand-purple",iconClass:"group-hover/option:!text-brand-purple group-hover/options:text-gray-500",icon:c.Bj,iconAfter:o.Z,iconAfterClass:"group-hover/options:text-gray-500 !text-gray-500 -ml-2",options:[],disabled:!1,showSelectedValueBelow:!1,ctaContentText:y.formatMessage(C.gpt4CtaContentText),onCtaContentClick:k}},[y,M.textareaDisclaimer,k]),P=(0,i.useCallback)(function(e){if(_!==e){if(n&&e===x){k("gpt-4-lock-button");return}t(e),T(e),u.o.logEvent(d.a.toggleModel,{model:e})}},[_,T,t,k,n]),N=(0,i.useMemo)(function(){return w?w.some(function(e){return e.categoryId===b})?w:n?(0,r._)(w).concat([I]):w:[]},[w,I,n]);return 1===N.length?null:(0,a.jsx)(p.Z,{value:null==l?void 0:l.id,onChange:P,items:N})}var C=(0,l.vU)({gpt4Name:{id:"ModelSwitcher.gpt4.name",defaultMessage:"GPT-4",description:"Name of the GPT-4 model"},gpt4Description:{id:"ModelSwitcher.gpt4.description",defaultMessage:"Our most capable model, great for tasks that require creativity and advanced reasoning.",description:"Description for the GPT-4 model"},gpt4Disclaimer:{id:"ModelSwitcher.gpt4.disclaimer",defaultMessage:"Available exclusively to Plus users\n\n{textareaDisclaimer}",description:"Disclaimer message, indicating exclusive availability to Plus users"},gpt4CtaContentText:{id:"ModelSwitcher.gpt4.ctaContentText",defaultMessage:"Upgrade to ChatGPT Plus",description:"Call-to-action text encouraging users to upgrade"}})},39912:function(e,t,n){n.d(t,{Z:function(){return ek},g:function(){return eU}});var r=n(39324),a=n(22830),o=n(4337),i=n(35250),s=n(19841),l=n(97296),u=n(70079),d=n(76483),c=n(2827),f=n(1454),p=n(70671),g=n(32004),m=n(94968),h=n(21389),v=n(77010),x=n(50795),b=n(82081),y=n(16920),C=n(75641),_=n(95954),w=n(32877),T=n(31621),j=n(46020),k=n(54118),M=n(32542),I=n(33669),P=n(67273),N=n(45635),S=n(47044),E=n(54986),R=n(77224),Z=n(89314),A=n(78781),F=n(63031),D=n(78018),U=n(88327),L=n(48397),O=n(88798),B=n(42569),G=n(16592),z=n(60554),H=n(78931),W=n(36338),J=n(6038),V=n(64082);function q(e){var t=e.conversationTemplateId,n=(0,H.ec)(H.F_.workspaceId);return null!=n?(0,i.jsx)($,{workspaceId:n,conversationTemplateId:t}):null}function $(e){var t=e.workspaceId,n=e.conversationTemplateId,r=(0,W.GS)(t,n),a=r.data,o=r.isError,s=(0,H.ec)(H.F_.accountUserId),l=(0,z.useRouter)();if((0,u.useEffect)(function(){o&&l.replace("/",void 0,{shallow:!0})},[l,o]),(0,u.useEffect)(function(){null!=a&&y.m9.logEvent("chatgpt_view_template")},[a]),null==a)return null;var d=a.owner_id===s;return(0,i.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-8 md:relative md:bottom-auto md:left-auto md:right-auto md:mb-16",children:(0,i.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,i.jsx)(J.Py,{conversationTemplate:a,className:"mb-2"}),(0,i.jsx)("div",{className:"font-medium",children:a.name}),(0,i.jsxs)("div",{className:"text-sm text-token-text-tertiary",children:["Template by ",a.author_name]}),null!=a.published_at&&null!=a.description?(0,i.jsx)("div",{className:"mt-3 max-w-md px-2 text-token-text-secondary",children:a.description}):null,(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsxs)("button",{onClick:function(e){e.preventDefault(),d?l.push("/templates/editor?id=".concat(a.id),void 0,{shallow:!0}):(0,V.O)(a.id)},className:"flex items-center gap-2 text-sm text-token-text-tertiary hover:text-token-text-secondary",children:[(0,i.jsx)(U.ZP,{icon:d?f.IYd:f.jRj}),d?"Edit template":"See how it's made"]})})]})})}var K=n(32636),Q=n(65261),Y=n(58268),X=n(21722),ee=n(75883),et=n(6013),en=n(32148),er=n(54655),ea=n(5268),eo=n(52390);function ei(){return(0,ea.a)(["visionContent"],(0,X._)(function(){return(0,ee.Jh)(this,function(e){switch(e.label){case 0:return[4,eo.ZP.getContent("vision").catch(function(){return O.m.danger("Failed to load content"),{onboarding:{title:"",content:[]}}})];case 1:return[2,e.sent()]}})}))}function es(e){var t=e.onPick,n=(0,a._)((0,u.useState)(!1),2),o=n[0],s=n[1],l=(0,u.useCallback)(function(e,n){s(!1),t(e,n)},[t]),d=(0,p.Z)(),c=ei().data,f=(null==c?void 0:c.examples)||[];return 0===f.length?null:(0,i.jsxs)(et.fC,{onOpenChange:s,open:o,children:[(0,i.jsx)(et.xz,{asChild:!0,children:(0,i.jsx)("div",{className:"cursor-pointer",children:(0,i.jsx)(N.u,{label:d.formatMessage(eu.tryAnExample),side:"top",sideOffset:4,open:!0!==o&&void 0,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(U.ZP,{className:"text-gray-500 dark:text-gray-300",icon:er.DcN}),(0,i.jsx)(en.T,{children:d.formatMessage(eu.tryAnExample)})]})})})}),(0,i.jsx)(et.h_,{children:(0,i.jsxs)(et.VY,{side:"top",sideOffset:8,className:"relative max-w-md animate-slideUpAndFade select-none rounded-xl border-gray-100 bg-white p-3 text-sm text-gray-600 shadow-xs dark:bg-gray-900 dark:text-white",children:[(0,i.jsxs)("div",{className:"mb-3 flex items-center justify-center gap-2 text-center text-sm font-medium",children:[(0,i.jsx)(U.ZP,{className:"text-gray-500 dark:text-gray-300",icon:er.DcN}),(0,i.jsx)(g.Z,(0,r._)({},eu.tryAnExample))]}),(0,i.jsx)("div",{className:"flex flex-col gap-2",children:f.map(function(e){return(0,i.jsx)(el,{imageUrl:e.imageUrl,thumbnailUrl:e.thumbnailUrl,label:e.label,prompt:e.prompt,onPick:l},e.imageUrl)})})]})})]})}function el(e){var t=e.imageUrl,n=e.thumbnailUrl,r=e.label,a=e.prompt,o=e.onPick,s=(0,u.useCallback)((0,X._)(function(){var e,n,r,i,s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,fetch(t)];case 1:if(!(e=l.sent()).ok)throw Error("Failed to load example image");return[4,e.blob()];case 2:return n=l.sent(),i=(r=t.split("/"))[r.length-1],o(new File([n],i,{type:null!==(s=e.headers.get("Content-Type"))&&void 0!==s?s:void 0}),a),[3,4];case 3:return l.sent(),O.m.danger("Failed to load example image"),[3,4];case 4:return[2]}})}),[t,o,a]);return(0,i.jsxs)("button",{className:"group flex h-14 w-64 flex-row items-stretch overflow-hidden rounded text-left",onClick:s,children:[(0,i.jsx)("div",{className:"w-14 flex-none bg-cover bg-center",style:{backgroundImage:"url(".concat(n,")")}}),(0,i.jsxs)("div",{className:"items-left flex min-w-0 flex-auto flex-col justify-center bg-gray-50 px-3 transition group-hover:bg-gray-100 dark:bg-gray-800 dark:group-hover:bg-gray-700",children:[(0,i.jsx)("div",{className:"font-medium leading-none",children:r}),(0,i.jsx)("div",{className:"mt-2 truncate text-xs leading-none text-gray-600 dark:text-gray-300",children:a})]})]})}var eu=(0,m.vU)({tryAnExample:{id:"VisionExamplePicker.tryAnExample",defaultMessage:"Try an example",description:"Label for examples popover"}}),ed=n(13002),ec=n(6948),ef=n(97747),ep=n(89368),eg="oai/apps/hasSeenVisionOnboarding",em=(0,m.vU)({contentModalButton:{id:"VisionOnboarding.contentModalButton",defaultMessage:"Continue",description:"Continue button in the content modal"}});function eh(e){var t,n=e.currentModelConfig,r=e.disabled,o=(0,a._)((0,u.useState)(function(){var e=ec.m.getItem(eg);return"number"==typeof e&&e}),2),s=o[0],l=o[1];return(null===(t=null==n?void 0:n.product_features.attachments)||void 0===t?void 0:t.type)!==C.Cd.Multimodal||r||!1!==s?null:(0,i.jsx)(ex,{onDismiss:function(){var e=Date.now();ec.m.setItem(eg,e),l(e)}})}var ev={lock:ed.Zp7,use_cases:ed.dvR};function ex(e){var t=e.onDismiss,n=(0,p.Z)(),r=ei().data,a=null==r?void 0:r.onboarding;return a?(0,i.jsx)(ep.Z,{isOpen:!0,onClose:t,type:"success",primaryButton:(0,i.jsx)(ef.ZP.Button,{title:n.formatMessage(em.contentModalButton),color:"primary",onClick:t}),title:a.title,size:"custom",className:"max-w-[510px] text-gray-800 outline-none dark:text-gray-300",children:a.content.map(function(e,t){if("paragraph"===e.type)return(0,i.jsx)("p",{children:e.text},t);if("callout"===e.type){var n;return(0,i.jsx)(eb,{icon:null!==(n=ev[e.icon])&&void 0!==n?n:ev.beaker,title:e.title,text:e.text,color:e.color||0},t)}return null})}):null}function eb(e){var t=e.icon,n=e.title,r=e.text,a=e.color;return(0,i.jsxs)("div",{className:"my-4 flex flex-row",children:[(0,i.jsx)("div",{className:(0,s.default)("w-14 flex-none pl-2 pt-2",0===a?"text-brand-green":"text-brand-purple"),children:(0,i.jsx)(t,{size:32})}),(0,i.jsxs)("div",{className:"max-w-60 flex-auto",children:[(0,i.jsx)("div",{className:"font-bold text-black dark:text-white",children:n}),(0,i.jsx)("div",{children:r})]})]})}function ey(){var e=(0,o._)(["mb-3 px-[10px] md:pl-0 md:pr-4 flex flex-wrap gap-2"]);return ey=function(){return e},e}function eC(){var e=(0,o._)(["absolute p-1 rounded-md bottom-[10px] md:bottom-3 md:p-2 md:right-3 dark:hover:bg-gray-900 dark:disabled:hover:bg-transparent right-2 disabled:text-gray-400 enabled:bg-brand-purple text-white"]);return eC=function(){return e},e}function e_(){var e=(0,o._)(["absolute left-4 bottom-2 md:left-4 md:bottom-3.5"]);return e_=function(){return e},e}function ew(){var e=(0,o._)(["absolute p-1 bottom-[10px] md:bottom-3 md:p-2 right-12 transition-opacity ",""]);return ew=function(){return e},e}function eT(){var e=(0,o._)(["\nflex flex-col w-full py-[10px] flex-grow md:py-4 md:pl-4 relative border border-black/10 bg-white dark:border-gray-900/50 dark:text-white dark:bg-gray-700 rounded-xl shadow-xs dark:shadow-xs\n","\n","\n"]);return eT=function(){return e},e}function ej(){var e=(0,o._)([""," flex ml-1 md:w-full md:m-auto md:mb-4 gap-0 md:gap-2 justify-center"]);return ej=function(){return e},e}var ek=(0,u.forwardRef)(function(e,t){var n,o,l,g,m,h,P=e.onAbortCompletion,L=e.onCreateNewCompletion,J=e.onRequestMoreCompletions,V=e.onContinueGenerating,$=e.canRegenerateResponse,X=e.currentModelId,ee=e.clientThreadId,et=e.isNewThread,en=e.isCompletionInProgress,er=e.className,ea=e.disabled,eo=void 0!==ea&&ea,ei=e.disabledReason,el=e.shouldRetry,eu=e.canPause,ed=void 0!==eu&&eu,ec=e.canContinue,ef=e.suggestions,ep=e.isInteractableSharedThread,eg=e.newConversationTemplateId,em=e.playgroundTemplateConfig,ev=(0,p.Z)(),ex=(0,T.oq)(ee),eb=(0,T.Hk)(ee),ey=(0,G.Ri)(X),eC=(0,z.useRouter)(),e_=(0,H.hz)(),ew=(0,I.w$)(),eT=(0,u.useContext)(M.QL).historyDisabled,ej=(0,u.useRef)(null),ek=(0,a._)((0,u.useState)(""),2),eI=ek[0],eN=ek[1],eS=(0,B.B9)(),eE=null!==X?eS.get(X):void 0,eR=(0,k.Fl)().isAdvancedDataAnalysisAvailable,eZ=R.AJ.None;eR&&(null===(n=null==eE?void 0:eE.product_features.attachments)||void 0===n?void 0:n.type)===C.Cd.CodeInterpreter?eZ=R.AJ.Interpreter:(null===(o=null==eE?void 0:eE.product_features.attachments)||void 0===o?void 0:o.type)===C.Cd.Multimodal||(null==eE?void 0:null===(l=eE.enabledTools)||void 0===l?void 0:l.includes("Hi Jane, come visit us for lunch at OpenAI? \uD83D\uDC9C"))?eZ=R.AJ.Multimodal:(null===(g=null==eE?void 0:eE.product_features.attachments)||void 0===g?void 0:g.type)===C.Cd.Retrieval&&(eZ=R.AJ.Retrieval);var eA=eZ!==R.AJ.None,eF=(0,A.gF)(function(e){return e.files}),eU=eF.length>0,eH=(0,A.gF)(A.HR.hasUploadInProgress),eJ=eU?!eH:""!==eI,eV=eF.length>=S.Z0,eq=eJ&&!eo&&!en,e$=(0,a._)((0,u.useState)(!1),2),eK=e$[0],eQ=e$[1],eY=e_.has(w.PL),eX=e_.has(w.rX),e0=(0,B.iu)(),e1=(0,B.Gg)(e0,!0),e2=null===(m=eS.get(X||e1))||void 0===m?void 0:m.tags.includes(B.S.GPT_4);(0,u.useEffect)(function(){eK!==eq&&(eQ(eq),eq&&eY&&e2&&(v.Z.setPrefetchEnabled(eX),v.Z.startEnforcement()))},[eq,eK,eY,e2,eX]);var e3=(0,Q.S)(ev,eE),e4=e3.handleFileAccepted,e5=e3.handleFileRejected,e8=(0,d.uI)((0,r._)({disabled:eo||!eA||eV,noClick:!0,onDropAccepted:e4,onDropRejected:e5,multiple:!0,maxSize:S.xC},(0,F.Z8)(eE))),e9=e8.getInputProps,e7=e8.open,e6=(0,u.useCallback)(function(){eN(""),(0,c.SI)(1,ej.current),(0,Y.sb)(),A.Dw.reset()},[]),te=(0,u.useCallback)(function(e){if(null==e||e.preventDefault(),!eo){var t,n,r=A.HR.getReadyFiles(A.gF.getState()),a=null===(t=ej.current)||void 0===t?void 0:t.value,o="".concat(null===(n=ej.current)||void 0===n?void 0:n.dataset.id,"-nextPrompt");if(eJ){var i=null!=a?a:"",s=[],l=[];r.forEach(function(e){eZ===R.AJ.Interpreter||eZ===R.AJ.Retrieval?s.push(e.file):eZ===R.AJ.Multimodal&&"width"in e.file&&"height"in e.file&&l.push({asset_pointer:(0,F.L8)(e.file.id),size_bytes:e.file.size,width:e.file.width,height:e.file.height})}),eZ===R.AJ.Multimodal&&l.length>0&&(l.push(null!=a?a:""),i={content_type:_.PX.MultimodalText,parts:l}),j.vm.hideThreadHeader(),L(o,{content:i,attachments:s},{eventSource:e?"mouse":"keyboard"},{suggestions:ef,conversationTemplateId:eg,playgroundTemplateConfig:em}),e6(),void 0!==ef&&y.m9.logEvent("chatgpt_prompt_ignore_suggestions")}}},[eo,eJ,L,eg,em,ef,e6,eZ]),tt=(0,u.useMemo)(function(){return{Enter:{validator:function(){return eq},handler:function(e){(e.metaKey||ew&&!e.shiftKey&&!e.nativeEvent.isComposing)&&(e.preventDefault(),te())}},Escape:{validator:function(){return ed&&en},handler:function(){P("",eb),x.o.logEvent(b.a.pauseCompletion,{threadId:T.tQ.getServerThreadId(ee),eventSource:"keyboard"})}}}},[eq,ew,en,te,ed,P,eb,ee]),tn=(0,u.useCallback)(function(e){var t;(null===(t=tt[e.key])||void 0===t?void 0:t.validator(e))&&tt[e.key].handler(e)},[tt]),tr=(0,u.useCallback)(function(e){if(e.clipboardData.files.length>0&&eZ===R.AJ.Multimodal){var t,n=e.clipboardData.files[0],r=null===(t=null==eE?void 0:eE.product_features.attachments)||void 0===t?void 0:t.accepted_mime_types;if(void 0!==r&&!r.includes(n.type)){O.m.danger(ev.formatMessage(eW.unsupportedFileType,{file_type:n.type})),e.preventDefault();return}j.vm.hideThreadHeader(),A.Dw.uploadFile((0,Z.W7)(n),n,eZ,ev)}},[eZ,null===(h=null==eE?void 0:eE.product_features.attachments)||void 0===h?void 0:h.accepted_mime_types,ev]);(0,u.useEffect)(function(){var e;null===(e=ej.current)||void 0===e||e.focus()},[]),(0,u.useEffect)(function(){A.Dw.reset()},[X]);var ta=(0,H.ec)(H.F_.businessWorkspaceId),to=(0,W.ki)(ta,!et).data,ti=(0,i.jsx)(eP,{clientThreadId:ee,currentLeafId:ex,currentRequestId:eb,shouldRetry:el,canRegenerateResponse:void 0!==$&&$,canContinue:void 0!==ec&&ec,canPause:ed,suggestions:ef,isCompletionInProgress:en,onAbortCompletion:P,onCreateNewCompletion:L,onRequestMoreCompletions:J,onContinueGenerating:V,onResetState:e6});(0,u.useImperativeHandle)(t,function(){return{setInputValue:eN}});var ts=eq?{backgroundColor:null==ey?void 0:ey.backgroundColor}:{},tl=(0,a._)(function(){switch(ei){case"feedbackRequired":return[eW.disabledFeedbackPlaceholder,!0];case"noModelsAvailable":return[eW.noModelsAvailablePlaceholder,!0];default:if(ep)return[eW.continueSharedConversationPlaceholder,!1];return[eW.placeholder,!1]}}(),2),tu=tl[0],td=tl[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("form",{className:er,onSubmit:te,children:(0,i.jsxs)("div",{className:"relative flex h-full flex-1 items-stretch md:flex-col",children:[null!=eg?(0,i.jsx)(q,{conversationTemplateId:eg}):null!=to&&(0,K.K5)(e_,et,ew,to.items)?(0,i.jsx)(K.ZP,{workspaceConversationTemplates:to.items}):ew?ti:null,!el&&(0,i.jsxs)("div",{className:"flex w-full items-center",children:[null!=eg&&"from_template_row"in eC.query&&(0,i.jsx)("button",{type:"button",onClick:function(){eC.push("/",void 0,{shallow:!0})},className:"mr-2 flex h-8 w-8 items-center justify-center text-token-text-tertiary hover:text-token-text-secondary",children:(0,i.jsx)(U.ZP,{icon:f.YFh,size:"medium"})}),(0,i.jsxs)(ez,{$disabled:el,$historyDisabled:eT,children:[eU&&(0,i.jsx)(eL,{children:eF.map(function(e){return(0,i.jsx)(D.Z,{onRemoveFileClick:function(){return A.Dw.remove(e.tempId)},file:e.file.name,loadingPercentage:e.status===R.Wk.Uploading?e.progress:void 0},e.tempId)})}),(0,i.jsx)(c.ZP,{id:eD,tabIndex:0,value:eI,"data-id":ex,ref:ej,style:{maxHeight:"200px"},rows:1,onKeyDown:tn,onChange:function(e){j.vm.hideThreadHeader(),eN(e.target.value)},onPaste:tr,placeholder:ev.formatMessage(tu),className:(0,s.default)("m-0 w-full resize-none border-0 bg-transparent p-0 pr-10 focus:ring-0 focus-visible:ring-0 dark:bg-transparent md:pr-12",!eV&&eA?"pl-12 md:pl-[30px]":"pl-3 md:pl-0",td&&"text-center"),disabled:eo}),!eV&&eA&&(0,i.jsx)(eB,{children:(0,i.jsx)(E.Z,{openFileDialog:e7,disabled:el,getInputProps:e9,attachmentsType:eE.product_features.attachments.type,onSelectRecentFile:function(e){return A.Dw.addRecentFile(JSON.stringify({file:e.name,currentTime:new Date().toString()}),e,eZ,ev)}})}),eZ===R.AJ.Multimodal&&(0,i.jsx)(eG,{$visible:!eJ&&!eV&&!en,children:(0,i.jsx)(es,{onPick:function(e,t){A.Dw.uploadFile((0,Z.W7)(e),e,eZ,ev),eN(t)}})}),!td&&(0,i.jsx)(eO,{disabled:!eq||el,style:ts,className:(0,s.default)("bottom-1.5",en?"disabled:bottom-0.5 md:disabled:bottom-0":"transition-colors disabled:opacity-40"),"data-testid":"send-button",children:en?(0,i.jsx)("div",{className:"text-2xl",children:(0,i.jsx)(eM,{})}):(0,i.jsx)(N.u,{label:ev.formatMessage(eW.sendMessageTooltip),children:(0,i.jsx)(U.ZP,{icon:U.IX,size:"small",className:"m-1 md:m-0"})})})]})]}),!ew&&ti]})}),(0,i.jsx)(eh,{currentModelConfig:eE,disabled:ep})]})});function eM(){var e=(0,a._)((0,u.useState)(0),2),t=e[0],n=e[1];(0,u.useEffect)(function(){var e=setInterval(function(){n(function(e){return(e+1)%3})},350);return function(){return clearInterval(e)}},[]);for(var r=[],o=0;o<3;o++)r.push((0,i.jsx)("span",{className:o<=t?"":"invisible",children:"\xb7"},o));return(0,i.jsx)(i.Fragment,{children:r})}var eI=function(e,t){y.m9.logEvent("chatgpt_prompt_use_suggestion",(0,L.bf)(e),{index:"".concat(t),type:(0,L.QO)(e)?L.jK.Reply:L.jK.Starter}),(0,L.QO)(e)?x.o.logEvent(b.a.useSuggestedReply,{value:(0,L.bf)(e),prompt_type:L.jK.Reply}):x.o.logEvent(b.a.useStarterPrompt,{value:(0,L.bf)(e),prompt_type:L.jK.Starter,title:e.title})};function eP(e){var t=e.clientThreadId,n=e.currentLeafId,r=e.currentRequestId,a=e.shouldRetry,o=e.canRegenerateResponse,s=e.canContinue,l=e.canPause,d=e.suggestions,c=e.isCompletionInProgress,f=e.onAbortCompletion,p=e.onCreateNewCompletion,g=e.onRequestMoreCompletions,m=e.onContinueGenerating,h=e.onResetState,v=(0,u.useCallback)(function(){f("",r),g(n,{eventSource:"mouse"}),eU()},[f,g,r,n]),y=(0,u.useCallback)(function(){f("",r),x.o.logEvent(b.a.pauseCompletion,{threadId:T.tQ.getServerThreadId(t),eventSource:"mouse"}),eU()},[f,t,r]),C=(0,u.useCallback)(function(){m(n),eU()},[m,n]),_=(0,u.useCallback)(function(e,t){j.vm.hideThreadHeader(),p("".concat(n,"-nextPrompt"),{content:(0,L.bf)(e),attachments:[]},{eventSource:"mouse"},{suggestions:d}),h(),eI(e,t),eU()},[h,n,p,d]);return a||o||s||l||void 0!==d?a?(0,i.jsx)(eF,{canRegenerateResponse:o,onRegenerateResponse:v}):(0,i.jsx)(eS,{canContinue:s,canPause:l,canRegenerateResponse:o,isCompletionInProgress:c,onHandleContinueGenerating:C,onRegenerateResponse:v,onSelectingSuggestedReply:_,onStopGenerating:y,suggestions:d}):null}var eN=function(e){var t=e.children;return(0,i.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.1,delay:0}},transition:{type:"tween",duration:.3,delay:.2},children:t})},eS=function(e){var t=e.canContinue,n=e.canPause,r=e.canRegenerateResponse,a=e.isCompletionInProgress,o=e.onRegenerateResponse,s=e.onStopGenerating,l=e.onHandleContinueGenerating,u=e.onSelectingSuggestedReply,d=e.suggestions;return(0,i.jsx)("div",{children:(0,i.jsxs)(eH,{children:[(0,i.jsx)("div",{className:"grow",children:void 0!==d&&(0,i.jsx)(L.Gt,{suggestions:d,onSelectingSuggestedReply:u})}),(0,i.jsx)(eE,{canContinue:t,canPause:n,canRegenerateResponse:r,isCompletionInProgress:a,onHandleContinueGenerating:l,onRegenerateResponse:o,onStopGenerating:s})]})})},eE=function(e){var t=e.canContinue,n=e.canPause,r=e.canRegenerateResponse,a=e.isCompletionInProgress,o=e.onHandleContinueGenerating,s=e.onRegenerateResponse,l=e.onStopGenerating;return t?(0,i.jsx)("div",{className:"flex items-center md:items-end",children:(0,i.jsx)(eR,{onHandleContinueGenerating:o})}):n&&a?(0,i.jsx)("div",{className:"flex items-center md:items-end",children:(0,i.jsx)(eZ,{onStopGenerating:l})}):r?(0,i.jsx)("div",{className:"flex items-center md:items-end",children:(0,i.jsx)(eA,{onRegenerateResponse:s})}):null},eR=function(e){var t=e.onHandleContinueGenerating,n=(0,I.w$)();return(0,i.jsx)(eN,{children:(0,i.jsxs)(P.z,{as:"button",color:"neutral",onClick:t,className:"whitespace-nowrap border-0 md:border",children:[(0,i.jsx)(U.ZP,{icon:f.lV_,className:"-rotate-180",size:n?"xsmall":"small"}),n&&(0,i.jsx)(g.Z,(0,r._)({},eW.continueGenerating))]})})},eZ=function(e){var t=e.onStopGenerating,n=(0,I.w$)();return(0,i.jsx)(eN,{children:(0,i.jsxs)(P.z,{as:"button",color:"neutral",onClick:t,className:"whitespace-nowrap border-0 md:border",children:[(0,i.jsx)(U.ZP,{icon:f.jxP,size:n?"xsmall":"small"}),n&&(0,i.jsx)(g.Z,(0,r._)({},eW.stopGenerating))]})})},eA=function(e){var t=e.shouldRetry,n=void 0!==t&&t,a=e.onRegenerateResponse,o=(0,I.w$)();return(0,i.jsx)(eN,{children:(0,i.jsxs)(P.z,{as:"button",color:n?"primary":o?"neutral":"none",onClick:a,className:(0,s.default)("whitespace-nowrap",n?"m-auto":"-z-0 border-0 md:border"),children:[(0,i.jsx)(U.ZP,{icon:f.Qxo,size:o?"xsmall":"small",className:"flex-shrink-0"}),(o||n)&&(0,i.jsx)(g.Z,(0,r._)({},eW.regenerateResponse))]})})},eF=function(e){var t=e.canRegenerateResponse,n=e.onRegenerateResponse;return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"mb-3 text-center text-xs",children:(0,i.jsx)(g.Z,(0,r._)({},eW.errorGeneratingResponse))}),(0,i.jsx)(eH,{$shouldRetry:!0,children:t&&(0,i.jsx)("div",{className:"flex flex-col justify-end",children:(0,i.jsx)(eA,{onRegenerateResponse:n,shouldRetry:!0})})})]})},eD="prompt-textarea";function eU(){var e;null===(e=document.getElementById(eD))||void 0===e||e.focus()}var eL=h.Z.div(ey()),eO=h.Z.button(eC()),eB=h.Z.div(e_()),eG=h.Z.div(ew(),function(e){return e.$visible?"opacity-100":"opacity-0 pointer-events-none"}),ez=h.Z.div(eT(),function(e){return e.$historyDisabled?"bg-gray-900 text-white shadow-xs dark:bg-gray-900 dark:text-white dark:shadow-xs":""},function(e){return e.$disabled&&"bg-gray-100"}),eH=h.Z.div(ej(),function(e){return e.$shouldRetry?"":"h-full"}),eW=(0,m.vU)({errorGeneratingResponse:{id:"PromptTextarea.errorGeneratingResponse",defaultMessage:"There was an error generating a response",description:"Error message shown when the response generation fails"},regenerateResponse:{id:"PromptTextarea.regenerateResponse",defaultMessage:"Regenerate",description:"Button label for regenerating response"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating",description:"Button label for continuing response generation"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating",description:"Button label for stopping response generation"},disabledFeedbackPlaceholder:{id:"PromptTextarea.disabledFeedbackPlaceholder",defaultMessage:"Select a response to continue",description:"Text that shows input is disabled due to mandatory feedback"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available",description:"Text that shows when input is disabled due to no models being available"},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message",description:"Placeholder text for the input field"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation.",description:"Placeholder text for the input field when viewing a shared chat"},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message",description:"Tooltip for the send message button"},pauseTooltip:{id:"PromptTextarea.pauseTooltip",defaultMessage:"Pause",description:"Tooltip for the pause button"},dragInstructions:{id:"PromptTextarea.dragInstructions",defaultMessage:"Upload file",description:"Instructions for dragging and dropping a file to upload"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.',description:"Error shown when an invalid file type is uploaded"}})},50921:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(35250),a=n(47103),o=n(19841),i=n(70079),s=n(1454),l=n(88327);function u(e){var t=e.onChange,n=e.enabled,u=e.label,d=e.disabled,c=e.withLockIcon,f=(0,i.useCallback)(function(){t(!n)},[n,t]);return(0,r.jsx)(a.fC,{checked:n,disabled:d,onCheckedChange:f,"aria-label":u,className:(0,o.default)(d?"cursor-not-allowed opacity-50":"cursor-pointer","bg-gray-200 radix-state-checked:bg-green-600","relative h-[25px] w-[42px] shrink-0 rounded-full"),children:(0,r.jsx)(a.bU,{className:(0,o.default)("flex h-[21px] w-[21px] items-center justify-center rounded-full","translate-x-0.5 transition-transform duration-100 will-change-transform radix-state-checked:translate-x-[19px]","bg-white shadow-[0_1px_2px_rgba(0,0,0,0.45)]"),children:void 0!==c&&c?(0,r.jsx)(l.ZP,{icon:s.UIZ,size:"xsmall"}):null})})}},15610:function(e,t,n){n.d(t,{V:function(){return R},Z:function(){return j}});var r=n(96237),a=n(39324),o=n(71209),i=n(22830),s=n(4337),l=n(35250),u=n(90209),d=n(47428),c=n(19841),f=n(70079),p=n(7137),g=n(1454),m=n(21389),h=n(33669),v=n(67273),x=n(88327),b=n(39912);function y(){var e=(0,s._)(["absolute w-[2.5px] h-5 -rotate-45 -top-0.5 left-1.5 bg-gray-500 border-[0.5px] border-gray-100 group-hover/toggle:bg-red-500 dark:border-[#4E4F60]"]);return y=function(){return e},e}function C(){var e=(0,s._)(["group/options flex flex-col rounded-xl border border-gray-100 bg-white text-left shadow-xxs dark:text-gray-100 dark:bg-gray-900 dark:border-gray-800 dark:shadow-xs mx-2 sm:mx-1 overflow-hidden"]);return C=function(){return e},e}function _(){var e=(0,s._)(["px-5 flex gap-2.5 flex-col py-4 whitespace-pre-line"]);return _=function(){return e},e}function w(){var e=(0,s._)(["block dark:text-white text-gray-900"]);return w=function(){return e},e}function T(){var e=(0,s._)(["block text-xs text-gray-500"]);return T=function(){return e},e}function j(e){var t=e.items,n=e.value,s=e.onChange,u=S(),d=(0,i._)((0,f.useState)(function(){return t.reduce(function(e,t){if(t.options.length>0){var r=t.options.find(function(e){return e.value===n});if(r)return e[t.value]=r.value,e;e[t.value]=t.options[0].value}return e},{})}),2),c=d[0],p=d[1],g=(0,f.useCallback)(function(e,i){var l,d=n,f=t.find(function(t){return t.value===e}),g=(null==c?void 0:c[e])!==void 0,m=g&&t.some(function(t){return t.value===e&&t.options.some(function(t){return t.value===c[e]})}),h=i;if(u&&void 0===i&&(h=g?c[e]:null!==(l=null==f?void 0:f.options[0].value)&&void 0!==l?l:void 0),null!=(d=void 0!==h?h:m?c[e]:e)&&d!==n){var v=d;s(d),p(function(t){return(0,o._)((0,a._)({},t),(0,r._)({},e,v))})}},[u,t,c,s,n]),m=(0,i._)((0,f.useState)(new Set),2),h=m[0],v=m[1],x=(0,f.useCallback)(function(e,t){t?v(function(t){var n=new Set(t);return n.add(e),n}):v(function(t){var n=new Set(t);return n.delete(e),n})},[]);return(0,l.jsx)("div",{className:"relative flex rounded-xl bg-gray-100 p-1 text-gray-900 dark:bg-gray-900",children:(0,l.jsx)("ul",{className:"flex w-full list-none gap-1 sm:w-auto",children:t.map(function(e,r){var a,o,i,s,u,d,f=n===e.value||e.options.some(function(e){return e.value===n}),p=f?n:null==c?void 0:c[e.value],m=null!=p?p:null===(o=e.options)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.value,v=null!==(s=e.options.find(function(e){return e.value===m}))&&void 0!==s?s:e.options[0],b=null!==(u=null==v?void 0:v.icon)&&void 0!==u?u:null;return(0,l.jsx)(M,{onToggleItemOpenChanged:x,item:e,isSelected:f,isOtherToggleDropdownOpen:h.size>0&&!h.has(e.categoryId),currentValue:n,defaultOption:null==v?void 0:v.value,onChange:g,currentIcon:b,displayCurrentValue:f&&e.showSelectedValueBelow&&null!==(d=null==v?void 0:v.name)&&void 0!==d?d:"",contentAlign:(a=t.length,0===r?"start":r===a-1?"end":"center")},r)})})})}function k(e){var t=e.item,n=e.isSelected,r=e.isOtherToggleDropdownOpen,a=e.isOpen,o=e.currentIcon,i=e.displayCurrentValue,s=null!=o?o:t.icon,u=t.options.length>1||t.alwaysShowOptions,d=S();return(0,l.jsxs)("div",{className:(0,c.default)("group/button","relative flex w-full items-center justify-center gap-1 rounded-lg border py-3 outline-none transition-opacity duration-100 sm:w-auto sm:min-w-[148px] md:gap-2 md:py-2.5",n?"border-black/10 bg-white text-gray-900 shadow-[0_1px_7px_0px_rgba(0,0,0,0.06)] hover:!opacity-100 dark:border-[#4E4F60] dark:bg-gray-700 dark:text-gray-100":"border-transparent text-gray-500 hover:text-gray-800 hover:dark:text-gray-100",void 0!==a&&a&&"text-gray-800 dark:text-gray-100",r&&n&&"opacity-50"),children:[(0,l.jsxs)("span",{className:(0,c.default)("relative max-[370px]:hidden",t.disabled&&"group-hover/button:text-red-500"),children:[null!=s&&(0,l.jsx)(x.ZP,{icon:s,className:(0,c.default)("transition-colors",n?t.buttonActiveClass:t.buttonHoverClass)}),t.disabled&&(0,l.jsx)(Z,{})]}),(0,l.jsx)("span",{className:(0,c.default)("truncate text-sm font-medium md:pr-1.5",!d&&"pr-1.5"),children:t.name}),null!=t.iconAfter&&(0,l.jsx)(x.ZP,{icon:t.iconAfter,className:(0,c.default)("ml-0.5 h-4 w-4 transition-colors sm:ml-0",t.iconAfterClass,n?t.buttonActiveClass:t.buttonHoverClass)}),d&&(n||u)&&(0,l.jsx)(x.ZP,{icon:u?g.bTu:p.DAO,className:"toggle-item-button-open ml-0.5 text-gray-500"}),d&&(0,l.jsx)(x.ZP,{icon:g.rH8,className:"toggle-item-button-closed ml-0.5 text-gray-500"}),null!=i&&""!==i&&(0,l.jsx)("span",{className:"absolute left-0 top-full mt-4 w-full truncate overflow-ellipsis text-sm text-gray-500",children:i})]})}function M(e){var t=e.item,n=e.isSelected,r=e.defaultOption,a=e.onChange,o=e.currentIcon,s=e.currentValue,u=e.displayCurrentValue,p=e.contentAlign,g=e.onToggleItemOpenChanged,m=e.isOtherToggleDropdownOpen,h=(0,i._)((0,f.useState)(void 0),2),v=h[0],x=h[1],y=(0,f.useRef)(null),C=t.options.length>1||t.alwaysShowOptions,_=!(void 0===t.description&&void 0===t.disclaimer),w=S(),T=(0,f.useCallback)(function(e){x(e),g(t.categoryId,!!e)},[t.categoryId,g]);return(0,l.jsx)(d.fC,{open:v,modal:!1,onOpenChange:function(e){w&&e&&!n&&C&&a(t.value)},children:(0,l.jsxs)("li",{className:"group/toggle w-full","data-testid":t.value,onMouseEnter:function(){return!w&&T(!0)},onMouseLeave:function(){return!w&&T(void 0)},children:[(0,l.jsx)(d.xz,{ref:y,className:"w-full cursor-pointer",onClick:function(){t.disabled||a(t.value)},children:(0,l.jsx)(k,{isOpen:!!v,isOtherToggleDropdownOpen:m,item:t,isSelected:n,currentIcon:o,displayCurrentValue:u})}),(0,l.jsx)(d.Uv,{children:(0,l.jsx)(d.VY,{className:(0,c.default)("w-full min-w-[100vw] max-w-[100vw] select-none pt-3 font-medium sm:w-[312px] sm:min-w-[312px] md:max-w-none","will-change-[opacity,transform] radix-side-bottom:animate-slideDownAndFade radix-side-left:animate-slideLeftAndFade radix-side-right:animate-slideRightAndFade radix-side-top:animate-slideUpAndFade",{"sm:min-w-[420px]":"Alpha"===t.name}),align:p,onCloseAutoFocus:function(e){v||e.preventDefault()},onEscapeKeyDown:function(e){var t;e.preventDefault(),null===(t=y.current)||void 0===t||t.focus()},children:(0,l.jsxs)(A,{children:[_&&(0,l.jsx)(I,{item:t}),(C||!v&&!w)&&(0,l.jsx)(P,{defaultOption:n?s:r,item:t,currentValue:s,onChange:function(e,t){a(e,t),T(void 0),(0,b.g)()},className:(0,c.default)("max-h-[calc(100vh-300px)] overflow-auto text-sm",_&&"mb-1 border-t border-gray-100 dark:border-gray-800")})]})})},t.categoryId)]})})}function I(e){var t=e.item;return(0,l.jsxs)(F,{className:"text-sm sm:text-base",children:[void 0!==t.description&&(0,l.jsx)(D,{children:t.description}),void 0!==t.disclaimer&&(0,l.jsx)(U,{children:t.disclaimer}),t.onCtaContentClick&&t.ctaContentText&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(v.z,{onClick:function(){return t.onCtaContentClick&&t.onCtaContentClick("info-button")},color:"primary",className:"w-full !bg-brand-purple py-3 text-xs hover:bg-brand-purple hover:brightness-90",children:t.ctaContentText})})]})}function P(e){var t=e.item,n=e.className,r=e.onChange,a=e.currentValue,o=e.defaultOption;return(0,l.jsx)(d.Ee,{defaultValue:o,value:a,className:n,children:t.options.map(function(e,n){return(0,l.jsx)(N,{option:e,selected:a===e.value,active:o===e.value,iconClass:t.iconClass,iconActiveClass:t.buttonActiveClass,showBorder:n!==t.options.length-1,isDisabled:e.disabled,onChange:function(){e.disabled||r(t.value,e.value)}},e.value)})})}function N(e){var t,n=e.option,r=e.selected,a=e.active,o=e.iconClass,i=e.iconActiveClass,s=e.isDisabled,f=e.onChange,p=e.showBorder,g=null!==(t=n.activeIcon)&&void 0!==t?t:n.icon;return(0,l.jsx)(d.Rk,{disabled:s,asChild:!0,value:n.value,onClick:f,className:"select-none outline-none",children:(0,l.jsxs)("div",{className:(0,c.default)("group/option relative flex w-full items-center gap-2 px-5 py-3 pr-11 font-medium focus:bg-gray-50 focus:dark:bg-gray-700",s?"text-gray-500":"text-gray-900 dark:text-gray-100",{"cursor-pointer hover:!bg-gray-50 dark:hover:!bg-gray-700":!s,"bg-gray-50 group-hover/options:bg-transparent dark:bg-gray-700":a&&!r,"text-gray-800 dark:text-gray-100":r||a,"border-b border-gray-100 dark:border-gray-800":p}),children:[null!=n.icon&&null!=g?(0,l.jsx)(x.ZP,{icon:r?n.icon:g,className:(0,c.default)("max-[370px]:hidden",!s&&!r&&o,r||a?i:"text-gray-500")}):null,(0,l.jsx)("span",{title:"string"==typeof n.name&&n.name?n.name:"",className:(0,c.default)("truncate",{"group-hover/option:text-gray-800 dark:group-hover/option:text-gray-100":!s,"text-gray-800 dark:text-gray-100":a&&!s}),children:n.name}),n.tags.map(function(e){return R(e)}),(0,l.jsx)("span",{className:(0,c.default)({"absolute right-3 rounded-full p-1 text-blue-400":!0,"opacity-0 group-hover/options:opacity-0":!r&&!s,"text-red-500":s}),children:(0,l.jsx)(x.ZP,{icon:s?u.Z:x.nQ,className:"h-5 w-5"})})]})})}var S=function(){return!(0,h.w$)()},E=new Set(["beta","confidential","alpha"]),R=function(e){return E.has(e)&&(0,l.jsx)("span",{className:(0,c.default)("py-0.25 rounded px-1 text-sm capitalize","beta"===e&&"bg-blue-200 text-blue-500","alpha"===e&&"bg-blue-200 text-blue-500","confidential"===e&&"bg-red-200 text-red-800"),children:e},e)},Z=m.Z.span(y()),A=m.Z.div(C()),F=m.Z.div(_()),D=m.Z.span(w()),U=m.Z.span(T())},86273:function(e,t,n){n.d(t,{iW:function(){return B},wm:function(){return H},sY:function(){return O}});var r=n(21722),a=n(39324),o=n(71209),i=n(22830),s=n(75883),l=n(35250),u=n(6013),d=n(13995),c=n(74686),f=n(5268),p=n(19841),g=n(70737),m=n(97296),h=n(70079),v=n(1454),x=n(94968),b=n(70671),y=n(32004),C=n(62509),_=n(16920),w=n(52390),T=n(32877),j=n(46020),k=n(78931),M=n(33669),I=n(97747),P=n(89368),N=n(45635),S=n(88327),E=n(1821),R=n(88798),Z=n(50921),A=n(61888),F=n(6948),D="".concat("oai/apps/hasUserContextFirstTime","/").concat("2023-06-29"),U=function(e){var t=e.onClose,n=(0,b.Z)(),r=(0,h.useCallback)(function(){F.m.setItem(D,!0),t()},[t]);return(0,l.jsxs)(P.Z,{isOpen:!0,onClose:A.noop,size:"custom",className:"max-w-xl",type:"success",title:n.formatMessage(L.title),primaryButton:(0,l.jsx)(I.ZP.Button,{onClick:r,title:n.formatMessage(L.ok),color:"primary"}),children:[(0,l.jsxs)("div",{className:"mb-6 flex flex-col gap-3",children:[(0,l.jsx)("p",{children:(0,l.jsx)(y.Z,(0,a._)({},L.body1))}),(0,l.jsx)("p",{children:(0,l.jsx)(y.Z,(0,a._)({},L.body2))})]}),(0,l.jsx)("div",{className:"flex flex-col gap-3 text-sm text-gray-500",children:(0,l.jsx)("p",{children:(0,l.jsx)(y.Z,(0,o._)((0,a._)({},L.legal1),{values:{article:function(e){return(0,l.jsx)("a",{href:B,target:"_blank",className:"underline",rel:"noopener noreferrer",children:e})}}}))})})]})},L=(0,x.vU)({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions",description:"Title of the UserContextFirstTimeModal"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats.",description:"Body of the first paragraph UserContextFirstTimeModal"},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated.",description:"Body of the second paragraph UserContextFirstTimeModal"},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more.",description:"Legal text of the first paragraph UserContextFirstTimeModal"},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK",description:"Button to close the UserContextFirstTimeModal"}}),O=(0,x.vU)({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters",description:"header for Custom instructions tips"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?",description:"tips for Custom instructions about you"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?",description:"tips for Custom instructions about you"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?",description:"tips for Custom instructions about you"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?",description:"tips for Custom instructions about you"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?",description:"tips for Custom instructions about you"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?",description:"tips for Custom instructions about model"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?",description:"tips for Custom instructions about model"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?",description:"tips for Custom instructions about model"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?",description:"tips for Custom instructions about model"},save:{id:"userContextModal.save",defaultMessage:"Save",description:"save button for my profile modal"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats",description:"chat preferences is enabled"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences",description:"enable chat preferences toggle label"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences",description:"disable chat preferences toggle label"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel",description:"Cancel button for Custom instructions modal"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?",description:"help text for about you section of Custom instructions"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?",description:"help text for about you section of Custom instructions"},profileTitle:{id:"userContextModal.title",defaultMessage:"Custom instructions",description:"title for Custom instructions modal"},profileSubhead:{id:"userContextModal.subhead",defaultMessage:"<article>Learn more</article> about Custom instructions and how they’re used to help ChatGPT provide better responses.",description:"subhead for Custom instructions modal"},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less.",description:"error message for Custom instructions modal"},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips",description:"show tips button for Custom instructions modal"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips",description:"hide tips button for Custom instructions modal"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes.",description:"title for confirm close modal"},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost.",description:"confirm close modal"},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back",description:"cancel button for confirm close modal"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit",description:"ok button for confirm close modal"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area.",description:"error message for mod api voilation"}}),B="https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt",G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return["userContext",e]},z={aboutUserMessage:void 0,aboutModelMessage:void 0,enabled:void 0};function H(){var e,t,n,u,p,g,m,v,x,M,A,L,H,$,K=(0,b.Z)(),Q=!1==!!F.m.getItem(D),Y=(0,i._)((0,h.useState)(!1),2),X=Y[0],ee=Y[1],et=(0,C.kP)().isAuthenticated,en=(0,j.tN)(function(e){return e.activeModals.has(j.B.UserContext)}),er=(t=(e=(0,C.kP)()).session,n=e.isAuthenticated,p=(u=(0,k.hz)()).has(T.Rw)||u.has(T.uo),(0,f.a)(G(null==t?void 0:t.accessToken),function(){return w.ZP.getUserSystemMessage((null==t?void 0:t.accessToken)||"").catch(function(){R.m.danger("Failed to get your Custom Instructions")})},{enabled:!!(en&&et&&n&&p),select:function(e){var t,n,r;return{aboutUserMessage:null!==(t=null==e?void 0:e.about_user_message)&&void 0!==t?t:"",aboutModelMessage:null!==(n=null==e?void 0:e.about_model_message)&&void 0!==n?n:"",enabled:null===(r=null==e?void 0:e.enabled)||void 0===r||r}}})),ea=er.isLoading,eo=er.data,ei=null!=eo?eo:{},es=ei.aboutUserMessage,el=void 0===es?"":es,eu=ei.aboutModelMessage,ed=void 0===eu?"":eu,ec=ei.enabled,ef=(0,i._)((0,h.useState)(z),2),ep=ef[0],eg=ef[1],em=ep.aboutUserMessage,eh=ep.aboutModelMessage,ev=ep.enabled,ex=null!=ev?ev:!!ec,eb=(0,i._)((0,h.useState)(null),2),ey=eb[0],eC=eb[1],e_=(0,h.useCallback)(function(){j.vm.closeModal(j.B.UserContext),eg(z),eC(null)},[]),ew=(m=(g={onSuccess:function(){e_()},onError:function(e){var t,n,r,a;return(null===(t=e.response)||void 0===t?void 0:t.reason)==="content_policy"&&(null===(n=e.response)||void 0===n?void 0:n.field)?eC(null===(r=e.response)||void 0===r?void 0:r.field):R.m.danger(null!==(a=e.message)&&void 0!==a?a:"Failed to update Custom Instructions."),e}}).onSuccess,v=g.onError,x=(0,C.kP)().session,M=(0,d.NL)(),(0,c.D)({mutationFn:function(e){var t=e.userContext;return w.ZP.createOrUpdateUserSystemMessage((null==x?void 0:x.accessToken)||"",t)},onSettled:function(e,t){var n=G(null==x?void 0:x.accessToken);null===e||t?M.invalidateQueries({queryKey:n}):M.setQueryData(n,e)},onSuccess:m,onError:v})),eT=ew.isLoading,ej=ew.mutate,ek=(0,i._)((0,h.useState)(!1),2),eM=ek[0],eI=ek[1],eP=V(null!=em?em:"")||V(null!=eh?eh:""),eN=void 0!==eh&&eh!==ed||void 0!==em&&em!==el||void 0!==ev&&ev!==ec,eS=(0,h.useCallback)(function(){eN?eI(!0):e_()},[e_,eN]),eE=(0,h.useCallback)((0,r._)(function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:if(eT)return[3,2];return eC(null),[4,ej({userContext:{aboutUserMessage:null!=em?em:"",aboutModelMessage:null!=eh?eh:"",enabled:!!ev}})];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[eT,eh,em,ev,ej]),eR=(0,h.useCallback)(function(){if(eP){var e,t,n=V(null!=em?em:""),r=V(null!=eh?eh:"");n&&_.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:J.toString(),character_length:null!==(e=null==em?void 0:em.length.toString())&&void 0!==e?e:""}),r&&_.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:J.toString(),character_length:null!==(t=null==eh?void 0:eh.length.toString())&&void 0!==t?t:""}),R.m.danger(K.formatMessage(O.messageLimitError,{limit:J}),{duration:4,hasCloseButton:!0});return}eE()},[K,eP,eh,em,eE]);if(en&&Q&&!X)return(0,l.jsx)(U,{onClose:function(){ee(!0)}});if(en&&eM){var eZ=function(){eI(!1)};return(0,l.jsx)(P.Z,{isOpen:!0,onClose:eZ,type:"success",title:K.formatMessage(O.confirmCloseTitle),primaryButton:(0,l.jsx)(I.ZP.Button,{title:K.formatMessage(O.confirmCloseOk),color:"danger",onClick:function(){e_(),eZ()}}),secondaryButton:(0,l.jsx)(I.ZP.Button,{title:K.formatMessage(O.confirmCloseCancel),color:"neutral",onClick:eZ}),children:(0,l.jsx)("div",{className:"text-sm",children:(0,l.jsx)(y.Z,(0,a._)({},O.confirmCloseBody))})},"confirm-close")}return(0,l.jsxs)(P.Z,{isOpen:en,onClose:eS,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:(0,l.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,l.jsx)(y.Z,(0,a._)({},O.profileTitle)),(0,l.jsx)(N.u,{sideOffset:4,interactive:!0,delayDuration:0,label:(0,l.jsx)("div",{children:(0,l.jsx)(y.Z,(0,o._)((0,a._)({},O.profileSubhead),{values:{article:function(e){return(0,l.jsx)("a",{href:B,target:"_blank",className:"underline",rel:"noreferrer",children:e})}}}))}),side:"bottom",children:(0,l.jsx)(S.HV,{className:"h-6 w-6 flex-shrink-0 text-gray-500"})})]}),children:[ea?(0,l.jsx)("div",{className:"flex h-14 items-center justify-center",children:(0,l.jsx)(E.Z,{})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-muted pb-3 pt-2 text-sm text-gray-600",children:(0,l.jsx)(y.Z,(0,a._)({},O.aboutYouHelpText))}),(0,l.jsx)(q,{className:"mb-3",onSubmit:eR,disabled:!ex,tip:(0,l.jsx)(W,{children:(0,l.jsxs)("ul",{className:"list-disc pl-5",children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.aboutUserTip1))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.aboutUserTip2))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.aboutUserTip3))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.aboutUserTip4))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.aboutUserTip5))})]})}),hasModError:"about_user_message"===ey,value:null!=em?em:el,onChange:function(e){return eg(function(t){return{aboutModelMessage:null!==(A=t.aboutModelMessage)&&void 0!==A?A:ed,aboutUserMessage:e.target.value,enabled:null!==(L=t.enabled)&&void 0!==L?L:ex}})}}),(0,l.jsx)("p",{className:"text-muted py-3 text-sm text-gray-600",children:(0,l.jsx)(y.Z,(0,a._)({},O.modelHelpText))}),(0,l.jsx)(q,{onSubmit:eR,disabled:!ex,tip:(0,l.jsx)(W,{children:(0,l.jsxs)("ul",{className:"list-disc pl-5",children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.modelTip1))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.modelTip2))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.modelTip3))}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Z,(0,a._)({},O.modelTip4))})]})}),hasModError:"about_model_message"===ey,value:null!=eh?eh:ed,onChange:function(e){return eg(function(t){return{aboutUserMessage:null!==(H=t.aboutUserMessage)&&void 0!==H?H:el,aboutModelMessage:e.target.value,enabled:null!==($=t.enabled)&&void 0!==$?$:ex}})}})]}),(0,l.jsx)("div",{className:"mt-5 sm:mt-4",children:(0,l.jsxs)("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[(0,l.jsxs)("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[(0,l.jsx)("div",{className:"self-center text-sm text-gray-600",children:(0,l.jsx)(y.Z,(0,a._)({},O.chatPreferencesEnable))}),(0,l.jsx)(Z.Z,{enabled:ex,onChange:function(e){var t,n;eg(function(r){return{aboutUserMessage:null!==(t=r.aboutUserMessage)&&void 0!==t?t:el,aboutModelMessage:null!==(n=r.aboutModelMessage)&&void 0!==n?n:ed,enabled:e}})},label:ex?K.formatMessage(O.disableToggleLabel):K.formatMessage(O.enableToggleLabel)})]}),(0,l.jsx)(I.ZP.Actions,{secondaryButton:(0,l.jsx)(I.ZP.Button,{onClick:eS,children:(0,l.jsx)(y.Z,(0,a._)({},O.cancel))}),primaryButton:(0,l.jsx)(I.ZP.Button,{loading:eT,onClick:eR,color:"primary",visuallyDisabled:eP,disabled:!eN,children:(0,l.jsx)(y.Z,(0,a._)({},O.save))})})]})})]},"user-context")}var W=function(e){var t=e.children;return(0,l.jsx)("div",{className:"whitespace-pre-line",children:t})},J=1500,V=function(e){return e.length>J},q=function(e){var t=e.disabled,n=e.onChange,r=e.onSubmit,s=e.placeholder,d=e.value,c=e.tip,f=e.hasModError,x=e.className,C=(0,b.Z)(),_=(0,h.useRef)(null),w=(0,M.x_)(),T=(0,M.aj)(),j=!w,k=(0,i._)((0,h.useState)(!1),2),N=k[0],E=k[1],R=(0,i._)((0,h.useState)(j),2),Z=R[0],A=R[1],F=V(d);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(P.Z,{isOpen:j&&!Z,type:"success",size:"custom",className:"max-w-lg",title:C.formatMessage(O.tipsHeader),closeButton:(0,l.jsx)(I.ZP.CloseButton,{onClose:function(){A(!0)}}),onClose:function(){A(!0)},children:c}),(0,l.jsxs)(u.fC,{open:!j&&N&&!Z,children:[(0,l.jsxs)("div",{className:x,children:[(0,l.jsx)(u.xz,{asChild:!0,children:(0,l.jsx)("textarea",{ref:_,className:(0,p.default)("w-full	resize-none rounded p-4 placeholder:text-gray-300 dark:bg-gray-800",{"border-orange-400 focus:border-orange-400":f,"border-red-500 focus:border-red-500":F&&!f,"border-gray-100 focus:border-brand-green":!F&&!f,"bg-gray-50 text-gray-300":t}),disabled:t,placeholder:s,onKeyDown:function(e){t||"Enter"!==e.key||!e.metaKey||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),r())},rows:w&&!T?8:7,value:d,onChange:n,onBlur:function(){E(!1)},onFocus:function(){E(!0)}})}),(0,l.jsx)("div",{className:(0,p.default)("flex items-center justify-between px-1 text-xs",F?"text-red-600":"text-gray-400"),children:f?(0,l.jsx)("div",{className:"visible mt-2 text-left text-xs text-orange-400 ",children:(0,l.jsx)(y.Z,(0,o._)((0,a._)({},O.modApiVoilation),{values:{policyLink:function(e){return(0,l.jsx)("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:e})},feedbackLink:function(e){return(0,l.jsx)("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:e})}}}))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:"".concat(d.length,"/").concat(J)}),(0,l.jsx)("button",{className:(0,p.default)("flex items-center gap-1",N?"text-gray-400":"text-gray-200"),onClick:function(){var e;null===(e=_.current)||void 0===e||e.focus(),A(!Z)},tabIndex:-1,children:(0,l.jsx)(g.M,{initial:!1,children:N&&(0,l.jsx)(m.E.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:Z?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.Z,(0,a._)({},O.showTips)),(0,l.jsx)(S.ZP,{size:"xsmall",icon:v.rDJ})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.Z,(0,a._)({},O.hideTips)),(0,l.jsx)(S.ZP,{size:"xsmall",icon:v.rzC})]})},"show-hide")})})]})})]}),(0,l.jsx)(u.h_,{children:(0,l.jsx)(u.VY,{side:"right",align:"start",sideOffset:12,className:"relative max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border-gray-100 bg-white p-4 text-sm text-gray-600 shadow-[0px_4px_14px_rgba(0,0,0,0.06)] dark:bg-gray-900 dark:text-white xl:max-w-xs",onOpenAutoFocus:function(e){e.preventDefault()},onCloseAutoFocus:function(e){e.preventDefault()},children:(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("strong",{children:(0,l.jsx)(y.Z,(0,a._)({},O.tipsHeader))}),c]})})})]})]})}},32636:function(e,t,n){n.d(t,{K5:function(){return y},ZP:function(){return T},sw:function(){return C}});var r=n(35250),a=n(29518),o=n.n(a),i=n(20326),s=n(9181),l=n.n(s),u=n(60554),d=n(70079),c=n(1454),f=n(16920),p=n(32877),g=n(78931),m=n(33669),h=n(6038),v=n(88327),x=n(39912),b=n(36338);function y(e,t,n,r){return e.has(p.L0.WorkspaceConversationTemplatesNewChat)&&t&&n&&null!=r&&r.length>=3}function C(e){var t=e.newConversationTemplateId,n=(0,g.ec)(g.F_.businessWorkspaceId),a=(0,b.ki)(n).data,o=(0,m.w$)(),i=(0,g.hz)();return o&&(null!=t||y(i,!0,o,null==a?void 0:a.items))?(0,r.jsx)("div",{className:"absolute -top-16 bottom-0 left-0 right-0 bg-gradient-to-b from-transparent to-gray-100 dark:hidden md:-right-2"}):null}function _(e){var t=e.conversationTemplate,n=(0,u.useRouter)();return(0,r.jsxs)("button",{type:"button",onClick:function(){var e=(0,b.l1)(t.id);n.push("".concat(e,"&from_template_row=1"),e,{shallow:!0}),(0,x.g)(),f.m9.logEvent("chatgpt_click_template_on_new_chat")},className:"flex flex-col justify-start rounded-lg border border-gray-100 bg-white p-4 text-left transition hover:border-gray-200 hover:shadow-[0_1px_7px_0px_rgba(0,0,0,0.06)] dark:border-gray-800 dark:bg-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Py,{conversationTemplate:t,iconSize:"small"}),(0,r.jsx)("div",{title:t.name,className:"text-sm font-medium text-token-text-secondary line-clamp-1",children:t.name})]}),null!=t.published_at&&null!=t.description&&(0,r.jsx)("div",{className:"mt-1 text-xs text-token-text-secondary line-clamp-2",children:t.description}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-token-text-tertiary",children:["by ",t.author_name]})]})}var w=(0,i.Z)(function(e){return o()(e,3)});function T(e){var t=w(e.workspaceConversationTemplates);return(0,d.useEffect)(function(){f.m9.logEvent("chatgpt_show_templates_on_new_chat")},[]),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("div",{className:"text-token-text-tertiary",children:"Get started with templates"}),(0,r.jsx)("div",{children:(0,r.jsxs)(l(),{href:"/templates",className:"flex items-center gap-2 text-token-text-tertiary transition hover:text-token-text-primary",children:["Explore more ",(0,r.jsx)(v.ZP,{icon:c.dyY})]})})]}),(0,r.jsx)("div",{className:"grid min-h-[4rem] grid-cols-3 gap-4",children:t.map(function(e){return(0,r.jsx)(_,{conversationTemplate:e},e.id)})})]})}},65261:function(e,t,n){n.d(t,{S:function(){return M},Z:function(){return k}});var r=n(39324),a=n(71209),o=n(4337),i=n(81949),s=n(35250),l=n(70079),u=n(76483),d=n(94968),c=n(70671),f=n(32004),p=n(21389),g=n(50795),m=n(82081),h=n(88327),v=n(88798),x=n(47044),b=n(54986),y=n(77224),C=n(89314),_=n(78781),w=n(63031);function T(){var e=(0,o._)(["absolute inset-0 bg-gray-100 opacity-80 flex gap-2 flex-col justify-center items-center dark:bg-gray-800 dark:text-gray-100"]);return T=function(){return e},e}var j=(0,d.vU)({dragInstructions:{id:"ThreadLayout.dragInstructions",defaultMessage:"Add anything",description:"Instructions for dragging and dropping a file to upload"}});function k(e){var t=e.className,n=e.children,o=e.currentModelConfig,l=(0,c.Z)(),d=(0,w.i_)(o)!==y.AJ.None,p=(0,_.gF)(function(e){return e.files}).length>=x.Z0,g=M(l,o),m=g.handleFileAccepted,v=g.handleFileRejected,b=(0,w.Z8)(o),C=(0,u.uI)((0,r._)({maxFiles:x.Z0,disabled:!d||p,noClick:!0,onDropAccepted:m,onDropRejected:v,multiple:!0,maxSize:x.xC},b)),T=C.getRootProps,k=C.isDragActive,P=function(){if(!b.accept||0===Object.keys(b.accept).length)return[];var e=[];return Object.values(b.accept).forEach(function(t){return e.push.apply(e,(0,i._)(t))}),e.sort()}();return(0,s.jsxs)("div",(0,a._)((0,r._)({},T({className:t})),{children:[n,k&&(0,s.jsxs)(I,{children:[(0,s.jsx)(h.Fk,{}),(0,s.jsx)("h3",{children:(0,s.jsx)(f.Z,(0,r._)({},j.dragInstructions))}),P.length>0&&(0,s.jsx)("h4",{children:P.join(", ")})]})]}))}function M(e,t){var n=(0,w.i_)(t);return{handleFileAccepted:(0,l.useCallback)(function(t,r){g.o.logEvent(m.a.uploadFile,{eventSource:"drag"}),t.length>0&&t.forEach(function(t){_.Dw.uploadFile((0,C.W7)(t),t,n,e)})},[e,n]),handleFileRejected:(0,l.useCallback)(function(t){t[0].errors.forEach(function(t){var n=(0,b.s)(t);"string"==typeof n?v.m.danger(n):v.m.danger(e.formatMessage(n,{size:x.EZ,maxNum:x.Z0}))})},[e])}}var I=p.Z.div(T())},54986:function(e,t,n){n.d(t,{Z:function(){return x},s:function(){return y}});var r=n(39324),a=n(35250),o=n(47428),i=n(27009),s=n(1454),l=n(70671),u=n(32004),d=n(94968),c=n(50795),f=n(82081),p=n(75641),g=n(67273),m=n(45635),h=n(88327),v=n(73610);function x(e){var t=e.disabled,n=e.getInputProps,i=e.openFileDialog,u=e.attachmentsType,d=e.onSelectRecentFile,c=(0,l.Z)(),f=u===p.Cd.Retrieval,v=(0,a.jsx)(g.z,{onClick:f?void 0:function(e){e.preventDefault(),i()},disabled:t,color:"none",className:"rounded-full bg-gray-500 p-0 text-white outline-none hover:bg-black","aria-label":c.formatMessage(C.uploadFile),children:(0,a.jsx)(h.ZP,{icon:s.OvN,size:"small"})}),x=(0,a.jsx)("input",(0,r._)({},n({className:"hidden"})));return f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.fC,{children:[(0,a.jsx)(o.xz,{disabled:t,asChild:!0,children:v}),(0,a.jsx)(o.Uv,{children:(0,a.jsx)(b,{openFileDialog:i,onSelectRecentFile:d})})]}),x]}):(0,a.jsxs)(m.u,{label:c.formatMessage(C.uploadFile),side:"top",sideOffset:4,children:[v,x]})}function b(e){var t,n=e.openFileDialog,i=e.onSelectRecentFile,l=(0,v.W)().data,d=(null!==(t=null==l?void 0:l.files)&&void 0!==t?t:[]).filter(function(e){return e.use_case===p.Ei.MyFiles&&(e.retrieval_index_status===p.Xf.Success||e.retrieval_index_status===p.Xf.Skipped)}).reverse().slice(0,4),c=d.map(function(e){return(0,a.jsx)(o.ck,{className:"cursor-pointer px-3 py-2.5 outline-none focus:bg-green-600 focus:text-white",onSelect:function(){return i({id:e.id,name:e.name,size:e.size})},children:(0,a.jsx)("div",{className:"line-clamp-1",children:e.name})},e.id)});return(0,a.jsxs)(o.VY,{side:"top",sideOffset:8,align:"start",alignOffset:-20,className:"w-64 rounded-xl border border-gray-100 bg-white text-sm shadow-xxs dark:border-gray-800 dark:bg-gray-900 dark:text-gray-100 dark:shadow-xs",children:[d.length>0&&(0,a.jsx)(o.__,{className:"px-3 pb-1 pt-3 font-medium",children:(0,a.jsx)(u.Z,(0,r._)({},C.recentFiles))}),c,(0,a.jsx)(o.ck,{className:"group cursor-pointer p-1 outline-none",onSelect:n,children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-black px-3 py-2.5 text-white group-radix-highlighted:bg-green-600",children:[(0,a.jsx)(h.ZP,{icon:s.iRh}),(0,a.jsx)("div",{children:(0,a.jsx)(u.Z,(0,r._)({},C.upload))})]})})]})}function y(e){var t=e.code,n=e.message;switch(t){case i.jK.FileTooLarge:return C.errorFileTooLarge;case i.jK.TooManyFiles:return c.o.logEvent(f.a.uploadedMaxFilesError),C.errorTooManyFiles;default:return n}}var C=(0,d.vU)({uploadFile:{id:"PromptFilePicker.uploadFile",defaultMessage:"Upload file",description:"Tooltip label for uploading a file button"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"File is too large. Maximum file size is {size}MB",description:"Error message when file is too large"},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"Too many files uploaded. Maximum number of files at a time is {maxNum}",description:"Error message when too many files are uploaded"},recentFiles:{id:"PromptFilePicker.recentFiles",defaultMessage:"Recent files",description:"Header text for the list of recent files"},upload:{id:"PromptFilePicker.upload",defaultMessage:"Upload",description:"Button text for uploading a file"}})},47044:function(e,t,n){n.d(t,{$e:function(){return a},EZ:function(){return o},Z0:function(){return r},xC:function(){return i}});var r=10,a={duration:20,hasCloseButton:!0},o=512,i=536870912},77224:function(e,t,n){var r,a,o,i,s,l;n.d(t,{AJ:function(){return r},Wk:function(){return o},qM:function(){return a}}),(i=r||(r={}))[i.None=0]="None",i[i.Multimodal=1]="Multimodal",i[i.Interpreter=2]="Interpreter",i[i.Retrieval=3]="Retrieval",(s=a||(a={})).CreateFile="create-file",s.UploadToCdn="upload-to-cdn",(l=o||(o={})).Uploading="uploading",l.Ready="ready"},89314:function(e,t,n){n.d(t,{Km:function(){return x},T1:function(){return h},W7:function(){return p},ul:function(){return g}});var r=n(21722),a=n(75883),o=n(75641),i=n(23111),s=n(52390),l=n(68993),u=n(88798),d=n(78781),c=n(63031),f={duration:20,hasCloseButton:!0};function p(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function g(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t,n){var r,i,l,u,c,f,p;return(0,a.Jh)(this,function(a){switch(a.label){case 0:r=o.Ei.Multimodal,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,s.ZP.createFile(t.name,t.size,r)];case 2:return l=(i=a.sent()).file_id,u=i.upload_url,(p=new FileReader).onload=function(){var e=new Image;e.onload=function(){c=e.width,f=e.height},e.src=p.result},p.readAsDataURL(t),d.Dw.createFileCompleted(e,l,u),[4,y(e,t,l,u,!0)];case 3:return a.sent(),d.Dw.uploadCompleted(e,null!=c&&null!=f?{width:c,height:f}:void 0),[3,5];case 4:return T(n,t,a.sent()),d.Dw.remove(e),[3,5];case 5:return[2]}})})).apply(this,arguments)}function h(e,t,n){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e,t,n){var r,i,l,u;return(0,a.Jh)(this,function(a){switch(a.label){case 0:r=o.Ei.AceUpload,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,s.ZP.createFile(t.name,t.size,r)];case 2:return l=(i=a.sent()).file_id,u=i.upload_url,d.Dw.createFileCompleted(e,l,u),[4,y(e,t,l,u,!1)];case 3:return a.sent(),d.Dw.uploadCompleted(e),[3,5];case 4:return T(n,t,a.sent()),d.Dw.remove(e),[3,5];case 5:return[2]}})})).apply(this,arguments)}function x(e,t,n){return b.apply(this,arguments)}function b(){return(b=(0,r._)(function(e,t,n){var r,i,l,u;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),r=o.Ei.MyFiles,[4,s.ZP.createFile(t.name,t.size,r)];case 1:return l=(i=a.sent()).file_id,u=i.upload_url,d.Dw.createFileCompleted(e,l,u),[4,y(e,t,l,u,!0)];case 2:return a.sent(),[4,function(e){return _.apply(this,arguments)}(l)];case 3:return a.sent(),d.Dw.uploadCompleted(e),[3,5];case 4:return T(n,t,a.sent()),d.Dw.remove(e),[3,5];case 5:return[2]}})})).apply(this,arguments)}function y(e,t,n,r){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(e,t,n,o){var i,l,u=arguments;return(0,a.Jh)(this,function(c){switch(c.label){case 0:var f;return i=u.length>4&&void 0!==u[4]&&u[4],l=u.length>5&&void 0!==u[5]&&u[5],[4,s.ZP.uploadFileToAzureStorage(t,o,function(t){l&&d.Dw.updateProgress(e,10+80*t)}).then((f=(0,r._)(function(t){return(0,a.Jh)(this,function(r){switch(r.label){case 0:return d.Dw.updateProgress(e,90),201!==t.status&&function(e,t){w.apply(this,arguments)}(t,n,i),[4,s.ZP.processFileUpload(n)];case 1:return r.sent(),[2]}})}),function(e){return f.apply(this,arguments)}))];case 1:return[2,c.sent()]}})})).apply(this,arguments)}function _(){return(_=(0,r._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=Date.now()+6e4,n=function(e){return new Promise(function(t){return setTimeout(t,e)})},r=0,a.label=1;case 1:if(!(Date.now()<t))return[3,4];return[4,s.ZP.getRetrievalIndexStatus(e)];case 2:if((i=a.sent())===o.Xf.Success||i===o.Xf.Skipped)return[2];if(i===o.Xf.Failed)throw new l.gK("Retrieval indexing failed");return[4,n(Math.min(1e3,100*++r))];case 3:return a.sent(),[3,1];case 4:throw new l.gK("Retrieval indexing timed out")}})})).apply(this,arguments)}function w(){return(w=(0,r._)(function(e,t){var n,r,o=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:n=o.length>2&&void 0!==o[2]&&o[2],r="Unknown error",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.data];case 2:return r=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:throw n&&s.ZP.markFileUploadFailed(t,r),new l.gK("File upload to blobstore failed",void 0,"default_upload_error")}})})).apply(this,arguments)}function T(e,t,n){var r=(0,c.kr)(e,"default_upload_error",{fileName:t.name});(0,i.T)(n)&&void 0!==n.code&&(r=(0,c.kr)(e,n.code)),u.m.danger(r,f)}},78781:function(e,t,n){n.d(t,{Dw:function(){return v},HR:function(){return h},gF:function(){return m}});var r=n(39324),a=n(71209),o=n(81949),i=n(94968),s=n(78103),l=n(50795),u=n(82081),d=n(88798),c=n(47044),f=n(77224),p=n(89314),g={files:[]},m=(0,s.ZP)(function(){return g}),h={hasUploadInProgress:function(e){return e.files.some(function(e){return e.status===f.Wk.Uploading})},getReadyFiles:function(e){return e.files.filter(function(e){return e.status===f.Wk.Ready})}},v={reset:function(){m.setState(g)},addRecentFile:function(e,t,n,r){var a=m.getState().files,i={tempId:e,type:n,status:f.Wk.Ready,file:t};a.length===c.Z0?(l.o.logEvent(u.a.uploadedMaxFilesError),d.m.danger(r.formatMessage(x.maxUploadsAtATime,{maxUploads:c.Z0,fileName:t.name}),c.$e)):m.setState(function(e){var t=e.files;return{files:(0,o._)(t).concat([i])}})},uploadFile:function(e,t,n,r){var a=m.getState().files,i={tempId:e,type:n,status:f.Wk.Uploading,step:f.qM.CreateFile,file:t,progress:1,fileId:null};a.length===c.Z0?(l.o.logEvent(u.a.uploadedMaxFilesError),d.m.danger(r.formatMessage(x.maxUploadsAtATime,{maxUploads:c.Z0,fileName:t.name}),c.$e)):(m.setState(function(e){var t=e.files;return{files:(0,o._)(t).concat([i])}}),n===f.AJ.Multimodal?(0,p.ul)(e,t,r):n===f.AJ.Interpreter?(0,p.T1)(e,t,r):n===f.AJ.Retrieval&&(0,p.Km)(e,t,r))},getFileState:function(e){var t;return null==e?null:null!==(t=m.getState().files.find(function(t){return t.tempId===e}))&&void 0!==t?t:null},createFileCompleted:function(e,t,n){var i=m.getState().files,s=i.findIndex(function(t){return t.tempId===e}),l=i[s];if(s>=0&&l.status===f.Wk.Uploading){var u=(0,o._)(i);u.splice(s,1,(0,a._)((0,r._)({},l),{step:f.qM.UploadToCdn,progress:10,fileId:t,cdnUrl:n})),m.setState({files:u})}},updateProgress:function(e,t){var n=m.getState().files,i=n.findIndex(function(t){return t.tempId===e}),s=n[i];if(i>=0&&s.status===f.Wk.Uploading){var l=(0,o._)(n);l.splice(i,1,(0,a._)((0,r._)({},s),{progress:t})),m.setState({files:l})}},uploadCompleted:function(e,t){var n=m.getState().files,i=n.findIndex(function(t){return t.tempId===e}),s=n[i];if(i>=0&&s.status===f.Wk.Uploading&&null!==s.fileId){var l=(0,o._)(n);l.splice(i,1,(0,a._)((0,r._)({},s),{tempId:e,status:f.Wk.Ready,file:(0,r._)({name:s.file.name,id:s.fileId,size:s.file.size},t||{})})),m.setState({files:l})}},remove:function(e){var t=m.getState().files,n=t.findIndex(function(t){return t.tempId===e});if(n>=0){var r=(0,o._)(t);r.splice(n,1),m.setState({files:r})}}},x=(0,i.vU)({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time",description:"Error message when user tries to upload more than the max number of files"}})},63031:function(e,t,n){n.d(t,{$H:function(){return h},Iy:function(){return g},L8:function(){return m},O6:function(){return b},VF:function(){return x},Z8:function(){return _},i_:function(){return C},kr:function(){return v},qS:function(){return y}});var r=n(21722),a=n(75883),o=n(70079),i=n(70671),s=n(94968),l=n(62509),u=n(75641),d=n(52390),c=n(54118),f=n(88798),p=n(77224);function g(e){return e.replace("file-service://","")}function m(e){return"file-service://"+e}function h(e){return e.startsWith("file-service://")}function v(e,t,n){switch(t){case"file_too_large":return e.formatMessage(w.fileTooLarge,n);case"over_user_quota":return e.formatMessage(w.overUserQuota,n);case"file_not_found":case"file_expired":return e.formatMessage(w.fileNotFound,n);case"file_timed_out":return e.formatMessage(w.fileTimedOut,n);case"ace_pod_expired":return e.formatMessage(w.codeInterpreterSessionTimeout,n);case"default_upload_error":return e.formatMessage(w.defaultCreateEntryError,n);case"default_download_link_error":return e.formatMessage(w.defaultDownloadLinkError,n);default:return e.formatMessage(w.unknownError)}}function x(){var e=(0,i.Z)();return(0,o.useCallback)(function(t,n){return v(e,t,n)},[e])}function b(){var e,t=(0,l.kP)().session,n=(0,i.Z)();return e=(0,r._)(function(e,r){var o,i,s,l,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(null==t)return f.m.danger(n.formatMessage(w.fileDownloadFailed)),[2,!1];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,d.ZP.getFileDownloadLink(e,t.accessToken)];case 2:if((o=a.sent()).status!==u.KF.Success)throw Error("File is not ready to download: "+JSON.stringify(o));return[4,fetch(o.download_url).then(function(e){return e.blob()})];case 3:return i=a.sent(),s=URL.createObjectURL(i),(l=window.open(s,"_blank"))&&l.addEventListener("beforeunload",function(){URL.revokeObjectURL(s)}),(c=document.createElement("a")).href=s,c.download=r,c.style.display="none",c.click(),URL.revokeObjectURL(s),[3,5];case 4:return a.sent(),f.m.danger(n.formatMessage(w.fileDownloadFailed)),[2,!1];case 5:return[2,!0]}})}),function(t,n){return e.apply(this,arguments)}}function y(){var e,t=(0,l.kP)().session,n=b();return e=(0,r._)(function(e,r){var o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(null==t)return[2];o=0,a.label=1;case 1:if(!(o<e.length))return[3,4];return[4,Promise.all(e.slice(o,o+r).map(function(e){return n(e.id,e.name)}))];case 2:a.sent(),a.label=3;case 3:return o+=r,[3,1];case 4:return[2]}})}),function(t,n){return e.apply(this,arguments)}}function C(e){var t,n,r,a,o=(0,c.Fl)().isAdvancedDataAnalysisAvailable,i=p.AJ.None;return o&&(null===(t=null==e?void 0:e.product_features.attachments)||void 0===t?void 0:t.type)===u.Cd.CodeInterpreter?i=p.AJ.Interpreter:(null===(n=null==e?void 0:e.product_features.attachments)||void 0===n?void 0:n.type)===u.Cd.Multimodal||(null==e?void 0:null===(r=e.enabledTools)||void 0===r?void 0:r.includes("Hi Jane, come visit us for lunch at OpenAI? \uD83D\uDC9C"))?i=p.AJ.Multimodal:(null===(a=null==e?void 0:e.product_features.attachments)||void 0===a?void 0:a.type)===u.Cd.Retrieval&&(i=p.AJ.Retrieval),i}function _(e){return(0,o.useMemo)(function(){var t,n=null===(t=null==e?void 0:e.product_features.attachments)||void 0===t?void 0:t.accepted_mime_types;if(void 0===n)return{};var r={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:n.reduce(function(e,t){return t in r?e[t]=r[t]:t.includes("/")&&(e[t]=[".".concat(t.split("/")[1])]),e},{})}},[e])}var w=(0,s.vU)({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}",description:"Error message when file upload fails"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}",description:"Error message when file download link fails"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred",description:"Error message when file upload fails"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large",description:"Error message when file is too large to upload"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded",description:"Error message when user storage space (quote) has been exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found",description:"Error message when file was not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again.",description:"Error message when file upload timed out"},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired",description:"Error message when code interpreter session expired"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again.",description:"Error message when file download fails"}})},47703:function(e,t,n){n.d(t,{ZC:function(){return b},ZP:function(){return y},xz:function(){return C}});var r=n(39324),a=n(71209),o=n(4337),i=n(35250),s=n(60554),l=n(70079),u=n(32004),d=n(94968),c=n(21389),f=n(16600),p=n(31621),g=n(68993),m=n(67273),h=n(98076);function v(){var e=(0,o._)(["\npy-2 px-3 border text-gray-600 rounded-md text-sm dark:text-gray-100\n","\n","\n","\n"]);return v=function(){return e},e}function x(){var e=(0,o._)(["bold underline"]);return x=function(){return e},e}function b(e){if(void 0===e)return{flagSeverity:void 0,shouldHideContent:!1,errCode:void 0,errMessage:void 0};var t,n,r=e.errType,a=e.errCode,o=e.err;return(null===(t=e.message.metadata)||void 0===t?void 0:null===(n=t.finish_details)||void 0===n?void 0:n.type)==="content_filter"?{flagSeverity:"warning",shouldHideContent:!1,errCode:f.qS.ContentOrTos,errMessage:o}:{flagSeverity:r,shouldHideContent:"danger"===r&&a===f.qS.ContentPolicy,errCode:a,errMessage:o}}function y(e){var t=e.message,n=e.onRequestMoreCompletions,a=e.clientThreadId,o=e.id,s=b(t),l=s.errCode,d=s.errMessage,c=s.flagSeverity;switch(l){case f.qS.ContentPolicy:return(0,i.jsx)(k,{$flag:c,children:(0,i.jsx)(j,{})});case f.qS.ContentOrTos:return(0,i.jsx)(k,{$flag:c,children:(0,i.jsx)(T,{})});case h.uU:return(0,i.jsx)(_,{id:o,onRequestMoreCompletions:n,flag:c,clientThreadId:a});case g.wp:return(0,i.jsx)(k,{$flag:c,children:(0,i.jsx)(u.Z,(0,r._)({},S.historyDisabledConversationMissing))});default:return void 0!==d?(0,i.jsx)(k,{$flag:c,children:d}):null}}function C(e){var t=e&&new Date(e),n=t&&new Date(t);return n?"after ".concat(n.getHours()%12||12,":").concat(10>n.getMinutes()?"0":"").concat(n.getMinutes()," ").concat(n.getHours()>=12?"PM":"AM"):"later"}function _(e){var t=e.id,n=e.onRequestMoreCompletions,o=e.flag,d=e.clientThreadId,c=(0,s.useRouter)(),f=(0,h.Y8)(function(e){return e.isoDate}),g=C(f),v=(0,l.useCallback)(function(){n(t,{eventSource:"mouse"},!0,"none",!1)},[t,n]),x=(0,l.useCallback)(function(){var e=void 0!==d?p.tQ.getServerThreadId(d):void 0;void 0===e?c.replace("/",void 0,{shallow:!0}):(0,h.m0)(e),n(t,{eventSource:"mouse"},!0,"none",!0)},[t,n,c,d]),b=null!=f?(0,i.jsx)("span",{children:(0,i.jsx)(u.Z,(0,a._)((0,r._)({},S.gptUsageCapExceeded),{values:{link:w,formattedTime:g}}))}):(0,i.jsx)(u.Z,(0,r._)({},S.gptUsageCapExceededExpired));return(0,i.jsx)(k,{$flag:null!=f?o:void 0,children:(0,i.jsxs)("div",{className:"flex items-center gap-6",children:[b,null==f&&(0,i.jsx)(m.z,{color:"light",className:"flex-shrink-0 bg-white",onClick:v,children:(0,i.jsx)(u.Z,(0,r._)({},S.buttonTryAgain))}),null!=f&&(0,i.jsx)(m.z,{color:"light",className:"flex-shrink-0 bg-white",onClick:x,children:(0,i.jsx)(u.Z,(0,r._)({},S.buttonUseDefaultModel))})]})})}var w=function(e){return(0,i.jsx)("a",{href:"https://share.hsforms.com/16d0ZZVM3QZirXnCD_q7u1Q4sk30",target:"_blank",rel:"noreferrer",className:"underline",children:e})};function T(){return(0,i.jsx)(u.Z,(0,a._)((0,r._)({},S.contentOrTosViolation),{values:{contentPolicyLink:I,feedbackLink:P,termsLink:N}}))}function j(){return(0,i.jsx)(u.Z,(0,a._)((0,r._)({},S.contentPolicyViolation),{values:{contentPolicyLink:I,feedbackLink:P}}))}var k=c.Z.div(v(),function(e){return"warning"===e.$flag&&"border-orange-500 bg-orange-500/10"},function(e){return"danger"===e.$flag&&"border-red-500 bg-red-500/10"},function(e){return void 0===e.$flag&&"border-green-500 bg-green-500/10"}),M=c.Z.a(x()),I=function(e){return(0,i.jsx)(M,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:e})},P=function(e){return(0,i.jsx)(M,{target:"_blank",href:"https://forms.gle/3gyAMj5r5rTEcgbs5",rel:"noreferrer",children:e})},N=function(e){return(0,i.jsx)(M,{target:"_blank",href:"https://openai.com/policies/terms-of-use",rel:"noreferrer",children:e})},S=(0,d.vU)({contentPolicyViolation:{id:"TextMessageDisplay.contentPolicyViolation",defaultMessage:"This content may violate our <contentPolicyLink>content policy</contentPolicyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area.",description:"Content policy violation message"},contentOrTosViolation:{id:"TextMessageDisplay.contentOrTosViolation",defaultMessage:"This content may violate our <contentPolicyLink>content policy</contentPolicyLink> or <termsLink>terms of use</termsLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area.",description:"Content policy violation or terms of use policy violation message"},historyDisabledConversationMissing:{id:"TextMessageDisplay.historyDisabledConversationMissing",defaultMessage:"Sorry, conversations created when Chat History is off expire after 6 hours of inactivity. Please start a new conversation to continue using ChatGPT.",description:"History disabled conversation not found message"},gptUsageCapExceeded:{id:"TextMessageDisplay.gptUsageCapExceeded",defaultMessage:"You've reached the current usage cap for GPT-4. You can continue with the default model now, or try again {formattedTime}. <link>Learn more</link>",description:"GPT usage cap exceeded message"},gptUsageCapExceededExpired:{id:"TextMessageDisplay.gptUsageCapExceededExpired",defaultMessage:"You previously reached your usage cap for GPT-4, but you can now try sending your message again",description:"GPT usage cap exceeded expired message"},buttonUseDefaultModel:{id:"TextMessageDisplay.buttonUseDefaultModel",defaultMessage:"Use default model",description:"Button to use default model"},buttonTryAgain:{id:"TextMessageDisplay.buttonTryAgain",defaultMessage:"Try again",description:"Button to try again"}})},31486:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(35250),a=n(91809);function o(e){var t=e.plugin,n=t.manifest.name_for_human;return(0,r.jsxs)("div",{className:"flex gap-4 rounded bg-gray-50 px-4 py-2 dark:bg-gray-800",children:[(0,r.jsx)(a.Z,{url:t.manifest.logo_url,name:n,size:32,className:"flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h2",{className:"align-top text-base font-medium",children:n}),(0,r.jsx)("div",{className:"text-sm",children:t.manifest.description_for_human})]})]})}},48759:function(e,t,n){n.d(t,{bf:function(){return f},q6:function(){return c},rC:function(){return d}});var r=n(39324),a=n(70216),o=n(22830),i=n(35250),s=n(70079),l=n(1454),u=n(88327);function d(e){var t=e.manifestValidationInfo,n=(0,a._)(e,["manifestValidationInfo"]),o=t.manifest_dict,s=t.warnings,l=t.errors;return(0,i.jsx)(p,(0,r._)({name:"manifest",content:o,warnings:s,errors:l},n))}function c(e){var t=e.apiValidationInfo,n=(0,a._)(e,["apiValidationInfo"]),o=t.openapi_spec_dict,s=t.warnings,l=t.errors;return(0,i.jsx)(p,(0,r._)({name:"OpenAPI spec",content:o,warnings:s,errors:l},n))}function f(e){var t=e.apiValidationInfo,n=(0,a._)(e,["apiValidationInfo"]),o=t.api_typescript;return o?(0,i.jsx)(g,(0,r._)({text:"Prompt for ChatGPT",content:o},n)):null}function p(e){var t=e.name,n=e.content,o=e.warnings,s=e.errors,d=(0,a._)(e,["name","content","warnings","errors"]),c=o&&o.length>0,f=s&&s.length>0,p="Validated ".concat(t),m=(0,i.jsx)(u.ZP,{icon:l.UgA,className:"text-green-500"});return f?(p="Errors in ".concat(t),m=(0,i.jsx)(u.ZP,{icon:l.q5L,className:"text-red-500"})):c&&(p="Warnings in ".concat(t),m=(0,i.jsx)(u.ZP,{icon:l.bcx,className:"text-yellow-500"})),(0,i.jsx)(g,(0,r._)({icon:m,text:p,content:n,warnings:o,errors:s},d))}function g(e){var t=e.icon,n=e.text,r=e.content,a=e.warnings,d=e.errors,c=e.expanded,f=e.onChangeExpanded,p=(0,o._)((0,s.useState)(!1),2),g=p[0],m=p[1],h=null!=c?c:g,v=(0,s.useCallback)(function(){f?f(!h):m(function(e){return!e})},[h,f]);return(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[t&&(0,i.jsx)("div",{children:t}),(0,i.jsx)("div",{children:n}),(0,i.jsx)("div",{role:"button",className:"cursor-pointer text-gray-500 hover:text-gray-700",onClick:v,children:(0,i.jsx)(u.ZP,{icon:h?l.rH8:l.bTu})})]}),h&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 font-semibold",children:[d&&d.map(function(e,t){return(0,i.jsx)("div",{className:"text-red-500",children:e},t)}),a&&a.map(function(e,t){return(0,i.jsx)("div",{className:"text-yellow-500",children:e},t)})]}),r&&(0,i.jsx)("pre",{className:"overflow-auto whitespace-pre-wrap text-xs",children:"string"==typeof r?r:JSON.stringify(r,null,2)})]})]})}},15608:function(e,t,n){n.d(t,{$L:function(){return b},Bb:function(){return x},U$:function(){return h},Up:function(){return y},nT:function(){return _},qo:function(){return v},sd:function(){return w}});var r=n(21722),a=n(39324),o=n(71209),i=n(22830),s=n(81949),l=n(75883),u=n(13995),d=n(74686),c=n(70079),f=n(52390),p=n(73908),g=n(35101),m=n(14444);function h(e){var t=e.onSuccess,n=e.onError,r=e.onSettled,a=(0,u.NL)(),o=(0,d.D)(f.ZP.updatePluginUserSettings.bind(f.ZP),{onSuccess:function(e){x(e,a),b(e,a),t(e)},onError:n,onSettled:r}).mutate;return(0,c.useCallback)(function(e){o({pluginId:e,isInstalled:!0})},[o])}function v(e){var t=e.onSuccess,n=e.onError,r=e.onSettled,a=(0,u.NL)(),o=(0,d.D)(f.ZP.updatePluginUserSettings.bind(f.ZP),{onSuccess:function(e){(function(e,t){var n=m.Z;t.setQueryData(n,function(t){var n=(0,s._)((null==t?void 0:t.items)||[]),r=n.findIndex(function(t){return t.id===e.id});return -1!==r&&n.splice(r,1),{count:n.length,items:n}})})(e,a),b(e,a),t(e)},onError:n,onSettled:r}).mutate;return(0,c.useCallback)(function(e){o({pluginId:e,isInstalled:!1})},[o])}function x(e,t){var n=m.Z;t.setQueryData(n,function(t){var n=(0,s._)((null==t?void 0:t.items)||[]),r=n.findIndex(function(t){return t.id===e.id});return -1!==r?n[r]=e:n.push(e),{count:n.length,items:n}})}function b(e,t){var n=g.V;t.setQueriesData(n,function(t){if(!t)return t;var n=t.items.findIndex(function(t){return t.id===e.id});if(-1===n)return t;var r=(0,s._)(t.items);return r[n]=e,(0,o._)((0,a._)({},t),{items:r})})}function y(e,t){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(e,t){var n,r;return(0,l.Jh)(this,function(a){switch(a.label){case 0:return n="".concat(window.location.origin,"/aip/").concat(e.id,"/oauth/callback"),[4,f.ZP.pluginOauthRedirect(e.id,n,t)];case 1:return r=a.sent(),window.location.href=r.redirect_uri,[2]}})})).apply(this,arguments)}function _(e){var t=e.manifest.auth;if("oauth"!==t.type||!e.oauth_client_id)return null;var n=new URLSearchParams({response_type:"code",client_id:e.oauth_client_id,redirect_uri:"".concat(window.location.origin,"/aip/").concat(e.id,"/oauth/callback"),scope:t.scope});return t.client_url.includes("slack.com")&&(n.delete("scope"),n.append("user_scope",t.scope)),"".concat(t.client_url,"?").concat(n)}function w(){var e,t=(0,i._)((0,c.useState)(!1),2),n=t[0],a=t[1];return{fetchManifestAndSpec:(0,c.useCallback)((e=(0,r._)(function(e){var t,n,r,o,i,s,u,d,c;return(0,l.Jh)(this,function(l){switch(l.label){case 0:t=e.domain,n=e.manifestAccessToken,r=e.onSuccess,o=e.onError,i=(0,p.NB)(t),l.label=1;case 1:if(l.trys.push([1,10,11,12]),a(!0),!(null!=i))return[3,3];return[4,(0,p.Zb)(i)];case 2:if(void 0===(s=l.sent()))return[2];return r({domain:i,scrapeManifestResponse:{plugin:s.plugin,manifest_validation_info:s.manifest_validation_info},apiValidationInfo:s.api_validation_info}),[3,9];case 3:return[4,f.ZP.scrapePluginManifest({domain:t,manifestAccessToken:n})];case 4:if(!(u=l.sent()).plugin)return[3,8];l.label=5;case 5:return l.trys.push([5,7,,8]),[4,f.ZP.getPluginApi({id:u.plugin.id})];case 6:return d=l.sent().api_validation_info,[3,8];case 7:return l.sent(),[3,8];case 8:r({domain:t,scrapeManifestResponse:u,apiValidationInfo:d,manifestAccessToken:n}),l.label=9;case 9:return[3,12];case 10:return c=l.sent(),o(null!=i?c:void 0),[3,12];case 11:return a(!1),[7];case 12:return[2]}})}),function(t){return e.apply(this,arguments)}),[]),isLoading:n}}},73908:function(e,t,n){n.d(t,{NB:function(){return h},Zb:function(){return v},cf:function(){return m},qZ:function(){return f},wR:function(){return c}});var r=n(21722),a=n(39324),o=n(75883),i=n(8844),s=n(22121),l=n(95954),u=n(52390),d=n(88798);function c(e){var t,n,r,a,o=null!==(a=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.invoked_plugin)||void 0===n?void 0:n.http_api_call_data)&&void 0!==a?a:null===(r=e.metadata)||void 0===r?void 0:r.http_api_call_data;if(void 0!==o){if(e.author.role!==l.uU.Assistant){console.error("Refusing to make localhost plugin HTTP call from non-assistant message",e);return}if("object"!=typeof o||"string"!=typeof o.namespace||0===o.namespace.length||"string"!=typeof o.function_name||0===o.function_name.length||"string"!=typeof o.parent_message_id||0===o.parent_message_id.length||"string"!=typeof o.url||0===o.url.length||"string"!=typeof o.method||!["get","post","put","delete","patch"].includes(o.method)||!Array.isArray(o.qs_params)||o.qs_params.some(function(e){return!Array.isArray(e)||2!==e.length||"string"!=typeof e[0]||"string"!=typeof e[1]})||"object"!=typeof o.headers||Object.keys(o.headers).some(function(e){return"string"!=typeof e})||Object.values(o.headers).some(function(e){return"string"!=typeof e})||!(null===o.body||"object"==typeof o.body&&Object.keys(o.body).every(function(e){return"string"==typeof e}))||"string"!=typeof o.api_function_type||!["kwargs","chat"].includes(o.api_function_type)){console.error("Refusing to make localhost plugin HTTP call with invalid metadata",e);return}if(!/^https?:\/\/localhost:/.test(o.url)){console.error("Refusing to make localhost plugin HTTP call with non-localhost URL",e);return}return o}}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,function(e){return g.apply(this,arguments)}(e)];case 1:return[2,n.sent()];case 2:return console.error("Error making localhost plugin HTTP call",t=n.sent()),[2,[{id:(0,i.Z)(),author:{role:l.uU.Tool,name:"plugin_service"},content:{content_type:l.PX.Text,parts:["Error making localhost plugin HTTP call: ".concat(t)]},recipient:"all"}]];case 3:return[2]}})})).apply(this,arguments)}function g(){return(g=(0,r._)(function(e){var t,n,r,s;function u(e){return Object.keys(e).map(function(e){return e.toLowerCase()})}return(0,o.Jh)(this,function(o){switch(o.label){case 0:var d;if(t={"content-type":"application/json"},d=[u(e.headers),u(t)].flat(),new Set(d).size!==d.length)throw Error("Refusing to make localhost plugin HTTP call with duplicate header keys");return n=e.url,e.qs_params.length>0&&(n=n+"?"+new URLSearchParams(e.qs_params)),r=void 0,null!==e.body&&(r=JSON.stringify(e.body)),[4,fetch(n,{method:e.method,headers:(0,a._)({},t,e.headers),body:r})];case 1:return[4,o.sent().text()];case 2:if(s=o.sent(),"chat"===e.api_function_type)return[2,[JSON.parse(s)]];if("kwargs"===e.api_function_type)return[2,[{id:(0,i.Z)(),author:{role:l.uU.Tool,name:"".concat(e.namespace,".").concat(e.function_name)},content:{content_type:l.PX.Text,parts:[s]},recipient:"all"}]];throw Error("Not implemented")}})})).apply(this,arguments)}function m(e){return!!h(e.domain)}function h(e){return/^localhost:\d+$/.test(e)?"http://".concat(e):/^https?:\/\/localhost:\d+$/.test(e)?e:null}function v(e){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e){var t,n,r,a,i,l;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch(e+"/.well-known/ai-plugin.json")];case 1:return[4,o.sent().json()];case 2:return n=o.sent(),[3,4];case 3:return o.sent(),d.m.danger("Failed to fetch localhost manifest. Check to ensure your localhost is running and your localhost server has CORS enabled."),[2];case 4:if(null==(r=null==n?void 0:null===(t=n.api)||void 0===t?void 0:t.url))return d.m.danger("Localhost manifest is missing OpenAPI spec URL."),[2];if("pathname"===(a=function(e){try{return new URL(e),"full url"}catch(t){if(e.startsWith("/"))return"pathname";return"neither"}}(r)))r=e+r;else if("neither"===a)return d.m.danger("Localhost manifest OpenAPI spec URL is not a valid URL or path."),[2];o.label=5;case 5:return o.trys.push([5,8,,9]),[4,fetch(r)];case 6:return[4,o.sent().text()];case 7:return i=o.sent(),[3,9];case 8:return o.sent(),d.m.danger("Failed to fetch localhost OpenAPI spec."),[2];case 9:try{l=s.ZP.parse(i)}catch(e){}try{l=JSON.parse(i)}catch(e){}if(null==l)return d.m.danger("Failed to parse localhost OpenAPI spec as JSON or YAML."),[2];o.label=10;case 10:return o.trys.push([10,12,,13]),[4,u.ZP.createOrUpdateLocalhostPlugin({localhost:e,manifest:n,openapiSpec:l})];case 11:return[2,o.sent()];case 12:return o.sent(),d.m.danger("Failed to create or update localhost plugin at ".concat(e)),[3,13];case 13:return[2]}})})).apply(this,arguments)}},35101:function(e,t,n){n.d(t,{V:function(){return l},Z:function(){return u}});var r=n(81949),a=n(5268),o=n(62509),i=n(52390),s=n(54118),l=["approvedAip"];function u(e){var t=e.category,n=e.search,u=e.offset,d=e.limit,c=(0,o.kP)(),f=c.session,p=c.isAuthenticated,g=(0,s.Fl)().isPluginsAvailable;return(0,a.a)((0,r._)(l).concat([{category:t,search:n},{limit:d,offset:u}]),function(){return i.ZP.getApprovedPlugins({offset:u,limit:d,category:t,search:n,accessToken:null==f?void 0:f.accessToken})},{enabled:g&&p,keepPreviousData:!0,onError:function(e){console.error(e)}})}},85330:function(e,t,n){n.d(t,{dT:function(){return v},hZ:function(){return d},iO:function(){return c},p0:function(){return h},wu:function(){return x}});var r=n(81949),a=n(70079),o=n(78103),i=n(6948),s=n(75641),l=n(78931),u=n(14444),d=3,c=[["www.klarna.com","server.shop.app"],["apim.expedia.com","kayak.com"],["www.redfin.com","plugins.zillow.com"],["instacart.com","api.tasty.co"]],f="oai/enabledPluginIds";function p(e){var t=e.currentWorkspace;return(null==t?void 0:t.id)!=null&&(null==t?void 0:t.structure)==s.CZ.WORKSPACE?"".concat(f,"/").concat(t.id):f}function g(e){var t=Array.from(new Set(i.m.getItem(p(e))));return{enabledPluginIds:new Set(t.splice(0,d))}}var m=(0,o.ZP)(function(){return g(l.ec.getState())});function h(){var e=(0,u.C)().installedPlugins,t=m().enabledPluginIds;return(0,a.useMemo)(function(){return e.filter(function(e){return t.has(e.id)})},[t,e])}function v(e){e.length>d||m.setState(function(){return i.m.setItem(p(l.ec.getState()),e),{enabledPluginIds:new Set(e)}})}function x(e){m.setState(function(t){if(t.enabledPluginIds.size>=d)return t;var n=(0,r._)(t.enabledPluginIds).concat([e]);return i.m.setItem(p(l.ec.getState()),n),{enabledPluginIds:new Set(n)}})}l.ec.subscribe(function(e){m.setState(g(e))})},14444:function(e,t,n){n.d(t,{C:function(){return u},Z:function(){return l}});var r=n(5268),a=n(70079),o=n(62509),i=n(52390),s=n(54118),l=["installedAip"];function u(){var e=(0,o.kP)(),t=e.session,n=e.isAuthenticated,u=(0,s.Fl)().isPluginsAvailable,d=(0,r.a)(l,function(){return i.ZP.getPlugins({offset:0,limit:250,isInstalled:!0,accessToken:null==t?void 0:t.accessToken})},{enabled:u&&n,onError:function(e){console.error(e)}}),c=d.data,f=d.isLoading;return(0,a.useMemo)(function(){return{installedPlugins:c?c.items:[],isLoading:f}},[c,f])}},56817:function(e,t,n){n.d(t,{Zr:function(){return o},_4:function(){return i},m1:function(){return a},ti:function(){return r}});var r="https://help.openai.com/en/collections/3943089-billing",a="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",o="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",i={WEBAPP:"chatgpt_web",MOBILE_IOS:"chatgpt_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android",GRANTED:"chatgpt_gratis_recepient",NOT_PURCHASED:"chatgpt_not_purchased"}},35588:function(e,t,n){n.d(t,{t:function(){return u}});var r=n(39324),a=n(71209),o=n(91530),i=n.n(o),s=n(78103),l={showAccountPaymentModal:!1},u=(0,s.ZP)()(function(e){return(0,a._)((0,r._)({},l),{setShowAccountPaymentModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();e({showAccountPaymentModal:t}),n&&n()}})})},70293:function(e,t,n){n.d(t,{fv:function(){return I},ZP:function(){return M},Ub:function(){return P}});var r=n(39324),a=n(22830),o=n(4337),i=n(35250),s=n(70079),l=n(1454),u=n(32004),d=n(70671),c=n(94968),f=n(21389),p=n(11084),g=n(31621),m=n(78931),h=n(52787),v=n(67273),x=n(28512),b=n(89368),y=n(88327),C=n(98359),_=n(20525);function w(e){var t=e.children,n=e.sidebarOpen,r=e.onClose;return(0,i.jsx)(C.u.Root,{show:n,as:s.Fragment,children:(0,i.jsxs)(_.V,{as:"div",className:"relative z-10",onClose:r,children:[(0,i.jsx)("div",{className:"fixed inset-0"}),(0,i.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,i.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,i.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,i.jsx)(C.u.Child,{as:s.Fragment,enter:"transform transition ease-in-out duration-100 sm:duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-300 sm:duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,i.jsx)(_.V.Panel,{className:"pointer-events-auto w-screen max-w-md border-l border-gray-100 dark:border-gray-700",children:(0,i.jsx)("div",{className:"h-full overflow-y-auto bg-white shadow-xl dark:bg-gray-800",children:t})})})})})})]})})}function T(){var e=(0,o._)(["overflow-y-auto h-full md:w-[250px] lg:w-[300px] xl:w-[350px] 2xl:w-[400px] md:border-l md:border-gray-100 md:dark:border-gray-700 bg-white dark:bg-gray-900"]);return T=function(){return e},e}function j(){var e=(0,o._)(["whitespace-pre-wrap text-sm"]);return j=function(){return e},e}function k(){var e=(0,o._)(["px-6 py-4 flex flex-col gap-1 hover:bg-gray-50 dark:hover:bg-gray-500/10 cursor-pointer border-b dark:border-white/10 border-gray-200"]);return k=function(){return e},e}function M(e){var t=e.children,n=e.title,a=e.icon,o=e.isOpen,s=e.slideOver,d=e.onClose,c=(0,i.jsxs)(S,{children:[(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 text-lg font-medium text-gray-900 dark:text-white",children:[(0,i.jsx)(y.ZP,{icon:a}),n]}),(0,i.jsx)("div",{className:"mr-2 mt-2 flex h-7 items-center",children:(0,i.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:d,children:[(0,i.jsx)("span",{className:"sr-only",children:(0,i.jsx)(u.Z,(0,r._)({},Z.closeSidebar))}),(0,i.jsx)(y.ZP,{icon:l.q5L,size:"medium","aria-hidden":"true"})]})})]}),t]});return s?(0,i.jsx)(w,{sidebarOpen:o,onClose:d,children:c}):o?c:null}function I(e){var t=e.clientThreadId,n=e.isOpen,r=e.slideOver,o=e.onClose,u=(0,d.Z)(),c=g.tQ.getThreadCurrentLeafId(t),f=(0,g.u9)(t,c),v=(0,a._)((0,s.useState)(),2),y=v[0],C=v[1],_=(0,m.hz)(),w=(0,s.useCallback)(function(){C(void 0)},[]),T=(0,s.useCallback)(function(){var e=g.tQ.getTree(t);(0,p.S)(e.getTextFromThread(c))},[c,t]);if(!_.has("debug"))return null;var j=f.map(function(e,t){var n=e.author,r=n.role,a=n.name;return(0,i.jsxs)(R,{role:"button",onClick:function(){return C(t)},children:[(0,i.jsxs)("div",{className:"text-xs font-medium uppercase text-gray-400",children:[r,a&&a!==r&&" (".concat(a,")")," -> ",(0,h.Ej)(e)]}),(0,i.jsx)("div",{children:(0,h.RR)(e)})]},e.id)});return(0,i.jsxs)(M,{icon:l.cDN,title:u.formatMessage(Z.debugTitle),isOpen:n,slideOver:r,onClose:o,children:[(0,i.jsxs)("div",{className:"flex items-center justify-around gap-2 px-4 py-1 text-xs font-medium uppercase ",children:[(0,i.jsx)(N,{clientThreadId:t,messages:f}),(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,{onCopy:T,buttonText:u.formatMessage(Z.copyText)})})]}),(0,i.jsx)(E,{children:j}),void 0!==y&&(0,i.jsx)(b.Z,{isOpen:!0,onClose:w,type:"success",children:(0,i.jsx)("pre",{className:"max-h-[80vh] overflow-auto whitespace-pre-wrap text-xs",children:JSON.stringify(f[y],null,2)})},"DebugMessageModal-".concat(y))]})}function P(e,t){var n=JSON.stringify(t)+"\n",r=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download="messages-".concat(g.tQ.getServerThreadId(e),".jsonl"),o.click(),URL.revokeObjectURL(a)}function N(e){var t=e.clientThreadId,n=e.messages,a=(0,s.useCallback)(function(){P(t,n)},[t,n]);return(0,i.jsxs)(v.z,{onClick:a,color:"dark",size:"small",children:[(0,i.jsx)(y.ZP,{icon:l._hL}),(0,i.jsx)(u.Z,(0,r._)({},Z.downloadRawConversation))]})}var S=f.Z.div(T()),E=f.Z.pre(j()),R=f.Z.div(k()),Z=(0,c.vU)({debugTitle:{id:"DebugSidebar.debugTitle",description:"Title of the Debug sidebar",defaultMessage:"Debug"},copyText:{id:"DebugSidebar.copyText",description:"Button text to copy the content to clipboard",defaultMessage:"Copy text"},downloadRawConversation:{id:"DebugSidebar.downloadRawConversation",description:"Button text to download raw conversation",defaultMessage:"Download raw conversation"},closeSidebar:{id:"DebugSidebar.closeSidebar",description:"Aria-label for the close sidebar button",defaultMessage:"Close sidebar"}})},98076:function(e,t,n){n.d(t,{BT:function(){return u},Y8:function(){return d},kc:function(){return s},m0:function(){return l},uU:function(){return i}});var r=n(81949),a=n(78103),o=n(25229),i="model_cap_exceeded",s=(0,a.ZP)(function(){return{serverThreadIds:new Set}});function l(e){s.setState(function(t){return{serverThreadIds:new Set((0,r._)(t.serverThreadIds).concat([e]))}})}function u(){var e=d(function(e){return e.isoDate}),t=d(function(e){return e.clearCapTimeout}),n=Date.now(),r=e&&new Date(e).getTime();return e&&r&&r<=n?(t(),null):e?"gpt-4":null}var d=(0,a.ZP)()((0,o.tJ)(function(e){return{isoDate:"",setCapTimeout:function(t){e(function(){return{isoDate:t}})},clearCapTimeout:function(){e(function(){return{isoDate:""}})}}},{name:"oai/apps/capExpiresAt"}))},73610:function(e,t,n){n.d(t,{W:function(){return p}});var r=n(21722),a=n(75883),o=n(5268),i=n(94968),s=n(70671),l=n(62509),u=n(52390),d=n(78931),c=n(88798),f=(0,i.vU)({errorLoadingFiles:{id:"filesModal.errorLoadingFiles",defaultMessage:"Failed to load files",description:"Error message when loading files fails"}});function p(){var e=(0,l.kP)(),t=e.session,n=e.isAuthenticated,i=(0,d.hz)(),p=(0,s.Z)();return(0,o.a)(["files"],(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,u.ZP.listFiles(t.accessToken).catch(function(){return c.m.danger(p.formatMessage(f.errorLoadingFiles)),{files:[]}})];case 1:return[2,e.sent()]}})}),{enabled:n&&i.has("files_list_ui")})}},44510:function(e,t,n){n.d(t,{_C:function(){return l},xT:function(){return u}});var r=n(70079),a=n(62509),o=n(6948),i=n(78931),s=function(e,t){return"oai/apps/".concat(t,"/").concat(e,"/lastModelUsed")};function l(){var e,t=(0,i.hz)(),n=(0,a.kP)().session,r=null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.id,l=(0,i.ec)(function(e){return{currentWorkspace:e.currentWorkspace}}).currentWorkspace,u=null==l?void 0:l.id;return t.has("persist_last_used_model")?o.m.getItem("".concat(s(u,r))):null}function u(){var e,t=(0,a.kP)().session,n=null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id,l=(0,i.ec)(function(e){return{currentWorkspace:e.currentWorkspace}}).currentWorkspace,u=null==l?void 0:l.id;return(0,r.useCallback)(function(e){if(!e)return null;var t=Date.now();o.m.setItem("".concat(s(u,n)),{modelId:e,updatedAt:t})},[u,n])}},65642:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(5268),a=n(70079),o=n(62509),i=n(52390),s=n(47703),l=n(98076),u={textarea:"","model-switcher":""};function d(){var e=(0,o.kP)().isAuthenticated,t=(0,l.Y8)(function(e){return e.isoDate}),n=(0,s.xz)(t),d=(0,r.a)(["modelMessageCap"],function(){return i.ZP.getModelMessageCap()},{enabled:e}).data;return(0,a.useMemo)(function(){var e=(null==d?void 0:d.message_cap)||0,t=(null==d?void 0:d.message_cap_window)||1,r=function(e){if(e<60)return e<2?"minute":"".concat(e," minutes");var t=Math.floor(e/60);if(t<24)return t<2?"hour":"".concat(t," hours");var n=Math.floor(t/24);if(n<7)return n<2?"day":"".concat(n," days")}(t),a=(null==d?void 0:d.message_disclaimer)||u;return r?d&&t&&e?{textareaDisclaimer:a.textarea.replaceAll("%FORMATTED_TIME%",n).replaceAll("%NUMERATOR%","".concat(e)).replaceAll("%DENOMINATOR%",r),modelSwitcherDisclaimer:a["model-switcher"].replaceAll("%FORMATTED_TIME%",n).replaceAll("%NUMERATOR%","".concat(e)).replaceAll("%DENOMINATOR%",r)}:{textareaDisclaimer:u.textarea,modelSwitcherDisclaimer:u["model-switcher"]}:{textareaDisclaimer:a.textarea,modelSwitcherDisclaimer:a["model-switcher"]}},[d,n])}},16592:function(e,t,n){n.d(t,{Ri:function(){return S},ZP:function(){return R},dN:function(){return a},i0:function(){return E}});var r,a,o,i,s,l,u,d,c,f,p=n(96237),g=n(39324),m=n(81949),h=n(35250),v=n(41170),x=n(70079),b=n(94968),y=n(70671),C=n(54118),_=n(78931),w=n(88327),T=n(40058),j=n(98076),k=n(65642),M=n(42569);(r=a||(a={})).BROWSING="browsing_model",r.CODE_INTERPRETER="code_interpreter_model",r.PLUGINS="plugins_model";var I=(0,b.vU)({gpt3_5Disclaimer:{id:"useModelSwitcherModels.gpt3_5.disclaimer",defaultMessage:"Available to Free and Plus users",description:"Disclaimer message for GPT-3.5, indicating availability to Free and Plus users"},gpt4Disclaimer:{id:"useModelSwitcherModels.gpt4.disclaimer",defaultMessage:"Available exclusively to Plus users",description:"Disclaimer message for GPT-4, indicating exclusive availability to Plus users"}}),P=(o={},(0,p._)(o,"gpt_3.5",{icon:w.jr,activeIcon:w.jr,backgroundColor:"#19c37d",buttonActiveClass:"text-brand-green",buttonHoverClass:"group-hover/button:text-brand-green",iconClass:"group-hover/option:!text-brand-green group-hover/options:text-gray-500",disclaimer:I.gpt3_5Disclaimer,showSelectedValueBelow:!1}),(0,p._)(o,"gpt_4",{icon:w.Bj,activeIcon:w.MP,backgroundColor:"#AB68FF",buttonActiveClass:"text-brand-purple",buttonHoverClass:"group-hover/button:text-brand-purple",iconClass:"group-hover/option:!text-brand-purple group-hover/options:text-gray-500",disclaimer:I.gpt4Disclaimer,showSelectedValueBelow:!1}),(0,p._)(o,"other",{icon:v.Z,activeIcon:v.Z,backgroundColor:"#E06C2B",buttonActiveClass:"text-orange-500",buttonHoverClass:"group-hover/button:text-orange-500",showSelectedValueBelow:!0}),(0,p._)(o,"experiments",{icon:v.Z,activeIcon:v.Z,backgroundColor:"#E06C2B",buttonActiveClass:"text-blue-500",buttonHoverClass:"group-hover/button:text-blue-500",showSelectedValueBelow:!0}),o),N=(f={},(0,p._)(f,a.BROWSING,{iconByCategory:(i={},(0,p._)(i,"gpt_3.5",w.O1),(0,p._)(i,"gpt_4",w.Fz),i),activeIconByCategory:(s={},(0,p._)(s,"gpt_3.5",w.X7),(0,p._)(s,"gpt_4",w.Ae),s),name:(0,h.jsxs)("span",{children:["Browse with"," ",(0,h.jsx)(w.ZP,{icon:w.jE,className:"-mt-[3px] inline-block"})," ","Bing"]})}),(0,p._)(f,a.CODE_INTERPRETER,{iconByCategory:(l={},(0,p._)(l,"gpt_3.5",w.lv),(0,p._)(l,"gpt_4",w.Q$),l),activeIconByCategory:(u={},(0,p._)(u,"gpt_3.5",w.vy),(0,p._)(u,"gpt_4",w.$V),u),name:"Advanced Data Analysis"}),(0,p._)(f,a.PLUGINS,{iconByCategory:(d={},(0,p._)(d,"gpt_3.5",w.AQ),(0,p._)(d,"gpt_4",w.IT),d),activeIconByCategory:(c={},(0,p._)(c,"gpt_3.5",w.Np),(0,p._)(c,"gpt_4",w.j3),c),name:"Plugins"}),f);function S(e){var t=R();return(0,x.useMemo)(function(){return function(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];if(r.options.length>0){var a,o,i=r.options.find(function(e){return e.value===t});if(i)return{item:i,categoryId:r.categoryId,backgroundColor:P[r.categoryId].backgroundColor,icon:null!==(o=null!==(a=i.icon)&&void 0!==a?a:r.icon)&&void 0!==o?o:P[r.categoryId].icon}}}}(t,e)},[t,e])}function E(e,t){return(0,M.OX)().some(function(n){return n[t]===e})}function R(){var e=(0,y.Z)(),t=(0,M.OX)(),n=(0,M.B9)(),r=(0,j.BT)(),o=(0,C.Fl)(),i=(0,_.ec)(_.F_.isBusinessWorkspace),s=(0,k.Z)().modelSwitcherDisclaimer,l=(0,_.hz)(),u=(0,M.B8)(),d=u.enabledModelsInCategoriesById,c=u.enabledModelsNotInCategoriesById,f=(0,k.Z)();return(0,x.useMemo)(function(){var u=[],p=!0,g=!1,h=void 0;try{for(var v,x=t[Symbol.iterator]();!(p=(v=x.next()).done);p=!0)!function(){var t=v.value;if(d.has(t.default_model)){var c=P[t.category]||{},p=r===t.default_model,g=n.get(t.default_model),h=p?[]:function(e,t,n,r,o){var i=e.isBrowsingEnabled,s=e.isBrowsingPublisherRedTeam,l=e.isPluginsEnabled,u=e.isAdvancedDataAnalysisEnabled,d=[];if((i||s)&&null!=n[a.BROWSING]&&r.has(n[a.BROWSING])){var c=N[a.BROWSING];d.push(Z(o.get(n[a.BROWSING]),{icon:c.iconByCategory[n.category],name:c.name,activeIcon:c.activeIconByCategory[n.category],disabled:t.has("browsing_disabled")}))}if(u&&null!=n[a.CODE_INTERPRETER]&&r.has(n[a.CODE_INTERPRETER])){var f=N[a.CODE_INTERPRETER];d.push(Z(o.get(n[a.CODE_INTERPRETER]),{icon:f.iconByCategory[n.category],name:f.name,activeIcon:f.activeIconByCategory[n.category],disabled:t.has("code_interpreter_disabled")}))}if(l&&null!=n[a.PLUGINS]&&r.has(n[a.PLUGINS])){var p=N[a.PLUGINS];d.push(Z(o.get(n[a.PLUGINS]),{icon:p.iconByCategory[n.category],name:p.name,activeIcon:p.activeIconByCategory[n.category],disabled:t.has("plugins_disabled")}))}return d}(o,l,t,d,n),x=t.category===T.WT&&null!=f,b=i?x?f.textareaDisclaimer:void 0:x?"".concat(null!=c.disclaimer?e.formatMessage(c.disclaimer):"","\n\n").concat(f.textareaDisclaimer):null!=c.disclaimer?e.formatMessage(c.disclaimer):void 0;u.push({categoryId:t.category,value:g.id,name:t.human_category_name,description:p?s:g.description,disclaimer:b,buttonActiveClass:c.buttonActiveClass,buttonHoverClass:c.buttonHoverClass,iconClass:c.iconClass,icon:c.icon,activeIcon:c.activeIcon,options:[Z(g,{icon:c.icon,activeIcon:c.activeIcon,name:"Default"})].concat((0,m._)(h)),disabled:p,showSelectedValueBelow:!1})}}()}catch(e){g=!0,h=e}finally{try{p||null==x.return||x.return()}finally{if(g)throw h}}var b=Array.from(c).map(function(e){return n.get(e)}).filter(function(e){return -1===e.id.indexOf(":")}),y=Array.from(c).map(function(e){return n.get(e)}).filter(function(e){return -1!==e.id.indexOf(":")}),C=b.some(function(e){return e.id===T.YE});if(b.length>0&&!C){var _=b[0],w=P.other;u.push({categoryId:"other",value:null==_?void 0:_.id,name:"Alpha",buttonActiveClass:w.buttonActiveClass,buttonHoverClass:w.buttonHoverClass,options:b.map(function(e){return Z(e)}),showSelectedValueBelow:!0,icon:w.icon,activeIcon:w.activeIcon,alwaysShowOptions:!0})}if(y.length>0){var j=y[0],k=P.experiments;u.push({categoryId:"experiments",value:null==j?void 0:j.id,name:"Experiments",buttonActiveClass:k.buttonActiveClass,buttonHoverClass:k.buttonHoverClass,options:y.map(function(e){return Z(e)}),showSelectedValueBelow:!0,icon:k.icon,activeIcon:k.activeIcon,alwaysShowOptions:!0})}return u},[c,t,d,r,n,o,l,f,s,i,e])}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,g._)({value:e.id,name:e.title,tags:e.tags},t)}},42569:function(e,t,n){n.d(t,{B8:function(){return D},B9:function(){return E},Bv:function(){return A},Gg:function(){return R},H6:function(){return U},OX:function(){return N},Q_:function(){return P},S:function(){return a},S0:function(){return T},Xy:function(){return F},ZL:function(){return I},fm:function(){return Z},iu:function(){return S},n2:function(){return k}});var r,a,o=n(21722),i=n(39324),s=n(71209),l=n(81949),u=n(75883),d=n(5268),c=n(60554),f=n(70079),p=n(62509),g=n(52390),m=n(31621),h=n(54118),v=n(78931),x=n(32542),b=n(36338),y=n(98076),C=n(44510),_=n(16592),w="text-davinci-002-render-sha",T="gpt-4";(r=a||(a={})).GPT_3_5="gpt3.5",r.GPT_4="gpt4",r.MOBILE="mobile";var j=U({slug:w,max_tokens:4097,title:"Default",description:"",tags:[a.GPT_3_5],product_features:{}}),k=new Set(["text-davinci-002-render-paid"]);function M(e){var t=(0,f.useContext)(x.QL).historyDisabled,n=(0,p.kP)(),r=n.session,a=n.isAuthenticated,i=null==r?void 0:r.accessToken;return(0,d.a)({retry:5,queryKey:["models",{isHistoryDisabled:!t}],queryFn:(0,o._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:return[4,g.ZP.getModels(i,t)];case 1:return[2,e.sent()]}})}),enabled:a,select:e})}function I(){return M().isLoading}function P(){return M().isSuccess}function N(){var e=M(function(e){return e.categories}).data;return null!=e?e:[]}function S(){var e=M(function(e){return e.models}).data;return(0,f.useMemo)(function(){return new Set(e?e.map(function(e){return e.slug}):[w])},[e])}function E(){var e=M(function(e){return e.models}).data;return(0,f.useMemo)(function(){return new Map(e?e.map(function(e){return[e.slug,U(e)]}):[[w,j]])},[e])}function R(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){var t,n,r=i.get(e);return null!==(n=null==r?void 0:null===(t=r.tags)||void 0===t?void 0:t.includes(a.GPT_3_5))&&void 0!==n&&n},r=(0,v.hz)(),o=(0,l._)(e),i=E();if(!t&&r.has("priority_driven_models_list"))return o[0];var s=(0,l._)(o).find(function(e){return n(e)});return null!=s?s:o[0]}function Z(){var e=(0,c.useRouter)(),t=e.query;return(0,f.useCallback)(function(n){var r=(0,s._)((0,i._)({},t),{model:encodeURIComponent(n)});delete r[b.t9],e.replace({pathname:e.basePath,query:r},void 0,{shallow:!0})},[t,e])}function A(e,t){var n,r=(0,c.useRouter)().query,a=void 0!==r[b.t9],o=(0,m.Zz)(t),i=decodeURIComponent(null!==(n=r.model)&&void 0!==n?n:""),s=(0,m.XK)(t),l=D().enabledModelsById,u=(0,h.Fl)().isBetaFeaturesUiEnabled,d=(0,y.kc)().serverThreadIds,p=S(),g=(0,C._C)(),v=u?l:p,x=R(v);return(0,f.useMemo)(function(){if(0!==v.size){if(void 0!==s&&d.has(s))return x;if(a&&o)return T;if(null!=e&&p.has(e))return null!=e?e:void 0;if(i&&v.has(i))return null!=i?i:void 0;if(g){var t;if(v.has(g.modelId))return null!==(t=g.modelId)&&void 0!==t?t:void 0}return null!=x?x:void 0}},[p,x,e,i,g,v,s,d,a,o])}function F(e,t){var n=A(e,t),r=E();return(0,f.useMemo)(function(){var e;return null==n?j:null!==(e=r.get(n))&&void 0!==e?e:j},[n,r])}function D(){var e=N(),t=S(),n=E(),r=(0,h.Fl)();return(0,f.useMemo)(function(){var o,i=e.reduce(function(e,a){var o,i,s,l,u,d,c=e.enabledModelsInCategoriesById,f=e.availableModelsInCategoriesById,p=t.has(a.default_model)?a.default_model:null;null!=p&&(f.add(p),c.add(p));var g=t.has(null!==(o=a[_.dN.BROWSING])&&void 0!==o?o:"")?n.get(null!==(i=a[_.dN.BROWSING])&&void 0!==i?i:""):null;g&&(f.add(g.id),(r.isBrowsingEnabled||r.isBrowsingPublisherRedTeam)&&c.add(g.id));var m=t.has(null!==(s=a[_.dN.CODE_INTERPRETER])&&void 0!==s?s:"")?n.get(null!==(l=a[_.dN.CODE_INTERPRETER])&&void 0!==l?l:""):null;m&&(f.add(m.id),r.isAdvancedDataAnalysisEnabled&&c.add(m.id));var h=t.has(null!==(u=a[_.dN.PLUGINS])&&void 0!==u?u:"")?n.get(null!==(d=a[_.dN.PLUGINS])&&void 0!==d?d:""):null;return h&&(f.add(h.id),r.isPluginsEnabled&&c.add(h.id)),e},{enabledModelsInCategoriesById:new Set,availableModelsInCategoriesById:new Set}),s=i.enabledModelsInCategoriesById,u=i.availableModelsInCategoriesById,d=new Set(Array.from(t).filter(function(e){return!u.has(e)})),c=new Set(Array.from(d).filter(function(e){var t;return!(null===(t=n.get(e))||void 0===t?void 0:t.tags.includes(a.MOBILE))}));return{enabledModelsInCategoriesById:s,availableModelsInCategoriesById:u,enabledModelsNotInCategoriesById:c,enabledModelsById:new Set((0,l._)(s).concat((0,l._)(c)))}},[e,t,r,n])}function U(e){return{id:e.slug,maxTokens:e.max_tokens,title:e.title,description:e.description,tags:e.tags,enabledTools:e.enabled_tools,product_features:e.product_features}}},58268:function(e,t,n){n.d(t,{sb:function(){return g},x0:function(){return f},yu:function(){return p}});var r,a=n(21722),o=n(39324),i=n(75883),s=n(78103),l=n(52390),u={data:void 0},d=(0,s.ZP)()(function(){return(0,o._)({},u)});function c(e){if(null==e.data)return d.setState(e);var t=e.data.suggestions.map(function(e){return{text:e}});d.setState({data:{messageId:e.data.messageId,suggestions:t}})}function f(){return d(function(e){return e.data})}var p=(r=(0,a._)(function(e,t,n){return(0,i.Jh)(this,function(r){switch(r.label){case 0:c({data:void 0}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.ZP.generateSuggestions(e,t,n)];case 2:return c({data:{messageId:t,suggestions:r.sent().suggestions}}),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2]}})}),function(e,t,n){return r.apply(this,arguments)}),g=function(){c(u)}},31621:function(e,t,n){n.d(t,{tQ:function(){return D},iN:function(){return F},_L:function(){return a},OX:function(){return N},Zz:function(){return S},yt:function(){return ea},aS:function(){return ei},ax:function(){return U},r7:function(){return es},XK:function(){return L},je:function(){return X},Uy:function(){return Y},GD:function(){return q},JI:function(){return V},U0:function(){return J},oq:function(){return H},Hk:function(){return $},UL:function(){return O},Kt:function(){return B},cj:function(){return el},Rz:function(){return er},Ro:function(){return W},GR:function(){return z},qA:function(){return K},XL:function(){return Q},u9:function(){return en},lA:function(){return ee},dz:function(){return et},Qi:function(){return eo},qN:function(){return R}});var r,a,o=n(39324),i=n(71209),s=n(5268),l=n(61888),u=n(60554),d=n(70079),c=n(78103),f=n(10301),p=n(62509),g=n(70216);n(68993);var m=n(48445),h=n(16600);n(44675).env.INTERNAL_API_URL;var v=n(11084),x=n(50795),b=n(82081),y=n(16920),C=n(75641),_=n(95954),w=n(88798),T=n(42569);n(86273);var j=n(52390),k=n(32542),M=n(52787),I="NEW:",P=0;function N(){return"".concat(I).concat(P++)}function S(e){return e.startsWith(I)}(r=a||(a={})).NewChat="NewChat",r.Server="Server",r.User="User",r.Generated="Generated",r.Unknown="Unknown";var E={},R=(0,c.ZP)((0,f.n)(function(){return{threads:{},clientNewThreadIdToServerIdMapping:{},threadRetainCounts:{}}})),Z=R.getState,A=R.setState,F={resolveThreadId:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z();return null!==(t=n.clientNewThreadIdToServerIdMapping[e])&&void 0!==t?t:e},getThreadCustomTitle:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z(),a=F.resolveThreadId(e,r);return null!==(n=null===(t=r.threads[a])||void 0===t?void 0:t.title)&&void 0!==n?n:void 0},getThreadDataTitle:function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z(),o=F.resolveThreadId(e,a);return null!==(r=null===(t=a.threads[o])||void 0===t?void 0:null===(n=t.initialThreadData)||void 0===n?void 0:n.title)&&void 0!==r?r:void 0},getThreadTitleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z(),n=F.resolveThreadId(e,t);return null!=t.threads[n]?t.threads[n].titleSource:a.Unknown},getThreadCreateTime:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z(),a=F.resolveThreadId(e,r);return null===(t=r.threads[a])||void 0===t?void 0:null===(n=t.initialThreadData)||void 0===n?void 0:n.createTime},getCurrentNode:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z(),a=F.resolveThreadId(e,r),o=null!==(n=null===(t=r.threads[a])||void 0===t?void 0:t.currentLeafId)&&void 0!==n?n:"root";return D.getTree(e).getNodeByIdOrMessageId(o)}},D={getOrInitThread:function(e){var t=D.resolveThreadId(e);return null!=Z().threads[t]?Z().threads[t]:(D.resetThread(e),Z().threads[e])},getServerThreadId:function(e){return S(e)?Z().clientNewThreadIdToServerIdMapping[e]:e},setServerIdForNewThread:function(e,t){void 0===Z().clientNewThreadIdToServerIdMapping[e]&&A(function(n){n.threads[t]=n.threads[e],delete n.threads[e],n.clientNewThreadIdToServerIdMapping[e]=t})},initThreadFromServerData:function(e,t){var n,r,s,l,u,d,c,f,p,v,x,b,y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,_=D.resolveThreadId(e);if(null!=Z().threads[_]||y){var w=(s=null===(n=Object.values(t.mapping).find(function(e){return null===e.parent}))||void 0===n?void 0:n.id,l=new Set,u=new Set,(null!==(r=t.moderation_results)&&void 0!==r?r:[]).forEach(function(e){e.blocked?u.add(e.message_id):e.flagged&&l.add(e.message_id)}),{rootId:s,mapping:Object.keys(t.mapping).reduce(function(e,n){var r,a,s=t.mapping[n],d=s.parent,c=s.children,f=(0,g._)(s,["parent","children"]),p=null!==(r=t.mapping[n].message)&&void 0!==r?r:m.Cv.createRootMessage();return u.has(p.id)?a=h.sK:l.has(p.id)&&(a=h.Mf),e[n]=(0,o._)((0,i._)((0,o._)({},f),{message:p,children:null!=c?c:[],parentId:d||"",type:m.uV[p.author.role]}),a&&{metadata:a}),e},{}),initialCurrentLeafId:t.current_node,authorName:t.author_name});if((null===(d=Z().threads[_])||void 0===d?void 0:d.isLoading)!==!1){var j=null!==(c=w.mapping)&&void 0!==c?c:m.Cv.createTree(),k={thread:j,initialCurrentLeafId:null!==(p=null!==(f=w.initialCurrentLeafId)&&void 0!==f?f:w.rootId)&&void 0!==p?p:"root",threadId:_,title:null!==(v=t.title)&&void 0!==v?v:null,lastModelUsed:function e(t,n){var r,a,o=t[n];return(null==o?void 0:null===(r=o.message)||void 0===r?void 0:null===(a=r.metadata)||void 0===a?void 0:a.model_slug)?o.message.metadata.model_slug:(null==o?void 0:o.parentId)?e(t,o.parentId):null}(w.mapping,w.initialCurrentLeafId),hasUserEditableContextFlag:null!==(x=t.has_user_editable_context)&&void 0!==x&&x,pluginIds:null!==(b=t.plugin_ids)&&void 0!==b?b:[],authorName:w.authorName,model:"model"in t&&null!=t.model?(0,T.H6)(t.model):void 0,createTime:"create_time"in t?new Date(1e3*t.create_time):void 0,conversationTemplateId:t.conversation_template_id},M=new m.Cv(j),I=k.initialCurrentLeafId;A(function(e){var t;e.threads[_]=(0,i._)((0,o._)({},null!==(t=e.threads[_])&&void 0!==t?t:{}),{initialThreadData:k,title:k.title,titleSource:a.Server,tree:M,currentLeafId:I,isLoading:!1,continuingFromSharedConversationId:C})}),D.recomputeConversationTurnsForCurrentLeafId(_,[])}}},resetThread:function(e){var t={thread:m.Cv.createTree(),initialCurrentLeafId:"root",threadId:null,title:null,lastModelUsed:null,pluginIds:[],authorName:void 0};D.deleteThread(e),A(function(n){n.threads[e]={initialThreadData:t,tree:new m.Cv(t.thread),title:t.title,titleSource:a.NewChat,currentLeafId:t.initialCurrentLeafId,conversationTurns:[],isLoading:!S(e)}})},updateInitialThreadDataForNewThread:function(e,t,n){A(function(r){r.threads[e].initialThreadData.lastModelUsed=t,r.threads[e].initialThreadData.pluginIds=n})},getThreadCurrentLeafId:function(e){var t,n,r=D.resolveThreadId(e);return null!==(n=null===(t=Z().threads[r])||void 0===t?void 0:t.currentLeafId)&&void 0!==n?n:"root"},setThreadCurrentLeafId:function(e,t){var n=D.resolveThreadId(e);null!=Z().threads[n]&&A(function(e){var r=e.threads[n];r.currentLeafId=t;var a=D.computeThreadConversationTurns(n,r.currentLeafId,r.conversationTurns);r.conversationTurns=a})},setTitle:function(e,t,n){var r=D.resolveThreadId(e);null!=Z().threads[r]&&A(function(e){e.threads[r].title=t,e.threads[r].titleSource=n})},getTitle:function(e){var t;return null!==(t=F.getThreadCustomTitle(e))&&void 0!==t?t:F.getThreadDataTitle(e)},getTitleAndSource:function(e){var t;return{title:null!==(t=F.getThreadCustomTitle(e))&&void 0!==t?t:F.getThreadDataTitle(e),titleSource:F.getThreadTitleSource(e)}},setConversationTemplateIdForNewThread:function(e,t){var n=D.resolveThreadId(e);A(function(e){e.threads[n].initialThreadData.conversationTemplateId=t})},updateTree:function(e,t){var n,r,a=D.resolveThreadId(e);if(!(null!=Z().threads[a])){console.warn("Thread does not exist, cannot update tree: ",a);return}t(D.getTree(e));var o=null!==(r=null===(n=Z().threads[a])||void 0===n?void 0:n.conversationTurns)&&void 0!==r?r:[];D.recomputeConversationTurnsForCurrentLeafId(a,o)},getTree:function(e){var t,n,r=D.resolveThreadId(e);return null!==(n=null===(t=Z().threads[r])||void 0===t?void 0:t.tree)&&void 0!==n?n:new m.Cv},resolveThreadId:function(e){return F.resolveThreadId(e)},recomputeConversationTurnsForCurrentLeafId:function(e,t){var n=D.resolveThreadId(e);A(function(e){var r=e.threads[n];if(null!=r){var a=D.computeThreadConversationTurns(n,r.currentLeafId,t);r.conversationTurns=a}})},computeThreadConversationTurns:function(e,t,n){var r=D.resolveThreadId(e);return D.getTree(r).getConversationTurns(t).map(function(e,t){var r=null==n?void 0:n[t];return(0,l.isEqual)(r,e)?r:e})},getThreadConversationTurns:function(e,t,n){var r,a,o,i=D.resolveThreadId(e),s=Z().threads[i];if(null==s)return[];var l=s.tree,u=l.messageIdToNodeId(null!==(a=null==s?void 0:s.currentLeafId)&&void 0!==a?a:"root"),d=null!=t?l.messageIdToNodeId(t):null;return null!=d&&d!==u?D.computeThreadConversationTurns(i,d,null!=n?n:[]):null!==(o=null===(r=Z().threads[i])||void 0===r?void 0:r.conversationTurns)&&void 0!==o?o:[]},getThreadModel:function(e){var t,n=D.resolveThreadId(e);return null===(t=Z().threads[n])||void 0===t?void 0:t.initialThreadData.model},removeContinuingFromSharedConversationId:function(e){var t=D.resolveThreadId(e);A(function(e){var n;(null===(n=e.threads[t])||void 0===n?void 0:n.continuingFromSharedConversationId)!=null&&delete e.threads[t].continuingFromSharedConversationId})},copyLastMessageToClipboard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mouse",n=D.getThreadCurrentLeafId(e),r=D.getThreadConversationTurns(e,n);return D.copyMessageToClipboard(e,r.length-1,t)},copyMessageToClipboard:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse",r=D.getThreadCurrentLeafId(e),a=D.getThreadConversationTurns(e,r)[t];if(!a)return Promise.reject();var o=a.messages,i=o.reduce(function(e,t){return t.err||t.message.author.role!==_.uU.Assistant||"all"!==t.message.recipient?e:e+(e?"\n\n":"")+(0,M.RR)(t.message)},"");return(0,v.S)(i).then(function(){x.o.logEvent(b.a.copyToClipboard,{threadId:D.getServerThreadId(e),id:o[0].message.id,eventSource:n}),y.m9.logEvent("chatgpt_copy_to_clipboard")})},deleteThread:function(e){A(function(t){delete t.threads[e],delete t.clientNewThreadIdToServerIdMapping[e]})},retainThread:function(e){A(function(t){var n;t.threadRetainCounts[e]=(null!==(n=t.threadRetainCounts[e])&&void 0!==n?n:0)+1}),clearTimeout(E[e])},releaseThread:function(e){null!=Z().threads[e]&&(A(function(t){var n;t.threadRetainCounts[e]=Math.max((null!==(n=t.threadRetainCounts[e])&&void 0!==n?n:0)-1,0)}),Z().threadRetainCounts[e]>0||(clearTimeout(E[e]),E[e]=setTimeout(function(){null==Z().threads[e]||Z().threadRetainCounts[e]>0||D.deleteThread(e)},3e4)))}},U=function(e){var t=(0,u.useRouter)(),n=(0,p.kP)(),r=n.session,a=n.isAuthenticated,o=(0,d.useContext)(k.QL).historyDisabled,i=null!==(0,d.useContext)(k.gB);(0,s.a)(["conversation",e],function(){return j.ZP.getConversation(e,null==r?void 0:r.accessToken)},{enabled:!S(e)&&a&&!o&&!i,onError:function(){t.replace("/",void 0,{shallow:!0}),w.m.danger("Unable to load conversation ".concat(e))},onSuccess:function(t){t&&D.initThreadFromServerData(e,t)}}),(0,d.useEffect)(function(){D.getOrInitThread(e)},[e,t])},L=function(e){return R(function(t){return S(e)?t.clientNewThreadIdToServerIdMapping[e]:e})},O=function(e){return R(function(t){var n,r,a=D.resolveThreadId(e);return null!==(r=null===(n=t.threads[a])||void 0===n?void 0:n.initialThreadData)&&void 0!==r?r:Object.freeze({thread:m.Cv.createTree(),threadId:null,initialCurrentLeafId:"root",title:null,lastModelUsed:null})})},B=function(e){return R(function(t){var n,r,a=D.resolveThreadId(e);return null!==(r=null===(n=t.threads[a])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r})},G=[],z=function(e){var t=R(function(t){var n,r,a=D.resolveThreadId(e);return null===(n=t.threads[a])||void 0===n?void 0:null===(r=n.initialThreadData)||void 0===r?void 0:r.pluginIds});return null!=t?t:G},H=function(e){return R(function(){return D.getThreadCurrentLeafId(e)})},W=function(e){return R(function(){return D.getThreadModel(e)})},J=function(e,t){var n=(0,d.useRef)([]);return R(function(){var r,a=D.getThreadConversationTurns(e,t,n.current);return n.current=a,null!==(r=null==a?void 0:a.length)&&void 0!==r?r:0})},V=function(e,t){var n=(0,d.useRef)([]);return R(function(){var r=D.getThreadConversationTurns(e,t,n.current);return n.current=r,r})},q=function(e,t,n){var r=(0,d.useRef)([]);return R(function(){var a=D.getThreadConversationTurns(e,n,r.current);return r.current=a,a[t]})},$=function(e){var t=H(e);return(0,d.useMemo)(function(){var n,r,a=D.getThreadConversationTurns(e,t,[]),o=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:0,i=null!==(r=null==a?void 0:a[o-1])&&void 0!==r?r:null;return 0===o?t:m.Cv.getRequestIdFromConversationTurn(i)},[t,e])},K=function(e){return R(function(){return D.getTitle(e)})},Q=function(e){return R(function(){return D.getTitleAndSource(e)})},Y=function(e){return R(function(){var t,n=D.resolveThreadId(e);return null===(t=Z().threads[n])||void 0===t?void 0:t.continuingFromSharedConversationId})},X=function(e){return R(function(){var t,n,r=D.resolveThreadId(e);return null===(t=Z().threads[r])||void 0===t?void 0:null===(n=t.initialThreadData)||void 0===n?void 0:n.authorName})},ee=function(e,t){return R(function(){var n,r;return null!==(r=null===(n=D.getTree(e))||void 0===n?void 0:n.getHasErrorFromNode(t))&&void 0!==r&&r})},et=function(e,t){return R(function(){var n,r;return null!==(r=null===(n=D.getTree(e))||void 0===n?void 0:n.isMessageIncomplete(t))&&void 0!==r&&r})},en=function(e,t){return R(function(){var n=D.getTree(e);return null==n?[]:n.getBranchFromLeaf(t).filter(function(e){return e.type!==_.Jq.Root}).map(function(e){return e.message})})},er=function(e,t){return R(function(){var n=D.getTree(e);return null==n?null:n.getLeafFromNode(t)})},ea=function(e,t){return R(function(){var n=D.getTree(e);return null!=n&&t.map(function(e){return n.getLeafFromNode(e)}).some(function(e){return n.getHasErrorFromNode(e.id)})})},eo=function(e){var t=D.getTree(e).getUserContext();if(null==t)return null;var n=t.message,r=null!==(i=null===(a=n.metadata)||void 0===a?void 0:a.shared_conversation_id)&&void 0!==i?i:null;if((null===(o=n.metadata)||void 0===o?void 0:o.user_context_message_data)!=null){var a,o,i,s,l,u=n.metadata.user_context_message_data,d=u.about_user_message,c=u.about_model_message;return{aboutUserMessage:null!==(s=null==d?void 0:d.trim())&&void 0!==s?s:"",aboutModelMessage:null!==(l=null==c?void 0:c.trim())&&void 0!==l?l:"",fallback:null,shareId:r}}return{aboutUserMessage:null,aboutModelMessage:null,fallback:(0,M.RR)(n),shareId:r}},ei=function(e){var t=R(function(t){var n,r,a=D.resolveThreadId(e);return null===(n=t.threads[a])||void 0===n?void 0:null===(r=n.initialThreadData)||void 0===r?void 0:r.hasUserEditableContextFlag});return null!=eo(e)||!!t},es=function(e){return R(function(){var t,n=D.resolveThreadId(e);return(null===(t=Z().threads[n])||void 0===t?void 0:t.continuingFromSharedConversationId)!=null})},el=function(e){var t,n,r,a=O(e),o=null!==(r=null==a?void 0:null===(t=a.model)||void 0===t?void 0:t.id)&&void 0!==r?r:null==a?void 0:a.lastModelUsed,i=(0,T.B9)(),s=void 0!=o?i.get(o):void 0;return(null===(n=null==s?void 0:s.product_features.attachments)||void 0===n?void 0:n.type)===C.Cd.Multimodal}},54118:function(e,t,n){n.d(t,{DN:function(){return T},Fl:function(){return j},N2:function(){return w}});var r,a=n(96237),o=n(39324),i=n(71209),s=n(22830),l=n(13995),u=n(5268),d=n(70079),c=n(78103),f=n(62509),p=n(6948),g=n(75641),m=n(52390),h=n(46020),v=n(78931),x={isBetaFeaturesUiEnabled:!1,isBrowsingAvailable:!1,isBrowsingEnabled:!1,isBrowsingPublisherRedTeam:!1,isPluginsAvailable:!1,isPluginsEnabled:!1,isAdvancedDataAnalysisAvailable:!1,isAdvancedDataAnalysisEnabled:!1,isSunshineAvailable:!1,isSunshineEnabled:!1},b=(r={},(0,a._)(r,g.tr.BROWSING,"isBrowsingEnabled"),(0,a._)(r,g.tr.CODE_INTERPRETER,"isAdvancedDataAnalysisEnabled"),(0,a._)(r,g.tr.PLUGINS,"isPluginsEnabled"),(0,a._)(r,g.tr.SUNSHINE,"isSunshineEnabled"),r),y=(0,c.ZP)()(function(){return x}),C={updateUserSettings:function(e){y.setState(function(t){return(0,o._)({},t,e)})},updateUserSettingsFromFeatures:function(e){y.setState(function(t){var n=C.getUserSettingsFromFeatures(e,t);return(0,o._)({},t,n)})},getUserSettingsFromFeatures:function(e,t){return Object.entries(e).reduce(function(e,n){var r=(0,s._)(n,2),l=r[0],u=r[1],d=b[l],c=!1;return(("isBrowsingEnabled"===d&&t.isBrowsingAvailable||"isAdvancedDataAnalysisEnabled"===d&&t.isAdvancedDataAnalysisAvailable||"isPluginsEnabled"===d&&t.isPluginsAvailable||"isSunshineEnabled"===d&&t.isSunshineAvailable)&&(c=u),d)?(0,i._)((0,o._)({},e),(0,a._)({},d,c)):e},{})}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return["userSettings",e]};function w(){var e=(0,f.kP)().session,t=(0,l.NL)();return function(){return t.invalidateQueries({queryKey:_(null==e?void 0:e.accessToken)})}}var T="oai/apps/hasSeenBrowsingDisabledJuly2023";function j(){var e=(0,f.kP)(),t=e.session,n=e.isAuthenticated,r=(0,v.hz)(),a=r.has("beta_features"),o=(0,v.ec)(v.F_.isBusinessWorkspace);return(0,u.a)(_(null==t?void 0:t.accessToken),function(){return m.ZP.getUserSettingBetaFeatures(t.accessToken).then(function(e){null!=e&&C.updateUserSettingsFromFeatures(e);var t=!!p.m.getItem(T);return!e.browsing||t||o||h.vm.openModal(h.B.TempBrowseToast),e})},{enabled:(a||!0===o)&&n}),(0,d.useEffect)(function(){C.updateUserSettings({isBetaFeaturesUiEnabled:a,isBrowsingAvailable:(null==t?void 0:t.user)!=null&&(0,f.yl)(null==t?void 0:t.user),isBrowsingPublisherRedTeam:r.has("browsing_publisher_red_team"),isAdvancedDataAnalysisAvailable:r.has("code_interpreter_available")||r.has("tools2"),isPluginsAvailable:r.has("plugins_available")||r.has("tools3"),isSunshineAvailable:r.has("sunshine_available")&&(null==t?void 0:t.user)!=null&&(0,f.yl)(null==t?void 0:t.user)})},[r,a,null==t?void 0:t.user]),y(function(e){return e})}},19012:function(e,t,n){var r=n(70079);t.Z=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),(0,r.useCallback)(function(){return e.current},[])}},87389:function(e,t,n){n.d(t,{S:function(){return f}});var r=n(21722),a=n(39324),o=n(22830),i=n(75883),s=n(12155),l=n(60554),u=n(70079),d=n(62509),c=n(52390);function f(){var e,t,n=(0,l.useRouter)(),f=(0,d.kP)().session,p=(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.idp)==="auth0",g=!!(null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.mfa),m=(0,o._)((0,u.useState)(!1),2),h=m[0],v=m[1],x=(0,u.useCallback)((0,r._)(function(){var e;return(0,i.Jh)(this,function(t){if(e=new URL(n.asPath,window.location.origin).toString(),!p)throw Error("Only username/password users can enable MFA");if(!f)throw Error("No session found, cannot enable MFA");if("mocked"===f.authProvider)throw Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README");return(0,s.signIn)(f.authProvider,{callbackUrl:e},(0,a._)({prompt:"login"},f.authProvider===d.Ho.OpenAI?{login_hint:(0,d.W_)({oai_enforce_mfa:!0,idp:"openai"})}:{oai_enforce_mfa:"true"})),[2]})}),[n.asPath,f,p]),b=(0,u.useCallback)((0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(!p)throw Error("Only username/password users can disable MFA");if(!f)throw Error("No session found, cannot enable MFA");if("mocked"===f.authProvider)throw Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README");return v(!0),[4,c.ZP.deleteMfa()];case 1:return t.sent(),[4,(0,s.signOut)({redirect:!1,callbackUrl:"/auth/login?next=".concat(encodeURIComponent(n.asPath))})];case 2:return e=t.sent(),v(!1),n.push(e.url),[2]}})}),[p,n,f]);return{setupMfa:x,isUsernamePassword:p,isLoggedInWithMfa:g,removeMfa:b,isLoading:h}}},11084:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(88798);function a(){r.m.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0})}function o(e){return new Promise(function(t,n){if("undefined"==typeof navigator||!navigator.clipboard)return a(),n();try{navigator.clipboard.writeText(e)}catch(e){return a(),n()}return t("success")})}}}]);